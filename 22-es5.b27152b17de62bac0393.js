function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function _createClass(n,t,e){return t&&_defineProperties(n.prototype,t),e&&_defineProperties(n,e),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{Yj9t:function(n,t,e){"use strict";e.r(t),e.d(t,"AuthModule",(function(){return x}));var i=e("ofXK"),r=e("tyNb"),o=e("3Pt+"),a=e("B+r4"),s=e("ocnv"),c=e("OzZK"),u=e("TaO5"),b=e("PTRe"),m=e("FwiY"),g=e("bE2y"),l=e("Wfee"),f=e("vkgz"),h=e("JIr8"),p=e("fXoL"),d=e("7dP1"),S=e("RwU8"),z=e("C2AL");function C(n,t){1&n&&(p.Wb(0),p.Hc(1," Please input your username! "),p.Vb())}function y(n,t){1&n&&(p.Wb(0),p.Hc(1," Your username must be more than 4 characters! "),p.Vb())}function v(n,t){1&n&&(p.Wb(0),p.Hc(1," Your username must be less than 20 characters! "),p.Vb())}function w(n,t){if(1&n&&(p.Fc(0,C,2,0,"ng-container",11),p.Fc(1,y,2,0,"ng-container",11),p.Fc(2,v,2,0,"ng-container",11)),2&n){var e=t.$implicit;p.qc("ngIf",e.hasError("required")),p.Cb(1),p.qc("ngIf",e.hasError("minlength")),p.Cb(1),p.qc("ngIf",e.hasError("maxlength"))}}function I(n,t){if(1&n){var e=p.Zb();p.Yb(0,"i",20),p.gc("click",(function(){return p.zc(e),p.jc().onTogglePasswordVisibility()})),p.Xb()}if(2&n){var i=p.jc();p.qc("nzType",i.passwordIconType)}}function Y(n,t){1&n&&(p.Wb(0),p.Hc(1," Please input your password! "),p.Vb())}function P(n,t){1&n&&(p.Wb(0),p.Hc(1," Your password must be more than 8 characters! "),p.Vb())}function X(n,t){1&n&&(p.Wb(0),p.Hc(1," Your password must be less than 20 characters! "),p.Vb())}function T(n,t){1&n&&(p.Wb(0),p.Hc(1," Your password should include at least an uppercase letter, numbers and special characters! "),p.Vb())}function k(n,t){if(1&n&&(p.Fc(0,Y,2,0,"ng-container",11),p.Fc(1,P,2,0,"ng-container",11),p.Fc(2,X,2,0,"ng-container",11),p.Fc(3,T,2,0,"ng-container",11)),2&n){var e=t.$implicit;p.qc("ngIf",e.hasError("required")),p.Cb(1),p.qc("ngIf",e.hasError("minlength")),p.Cb(1),p.qc("ngIf",e.hasError("maxlength")),p.Cb(1),p.qc("ngIf",e.hasError("pattern"))}}function O(n,t){1&n&&(p.Yb(0,"nz-form-item"),p.Yb(1,"nz-form-label",21),p.Yb(2,"strong"),p.Hc(3,"Role"),p.Xb(),p.Xb(),p.Yb(4,"nz-form-control"),p.Yb(5,"nz-radio-group",22),p.Yb(6,"label",23),p.Yb(7,"strong"),p.Hc(8,"Student"),p.Xb(),p.Xb(),p.Yb(9,"label",24),p.Yb(10,"strong"),p.Hc(11,"Service provider"),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb()),2&n&&(p.Cb(1),p.qc("nzSpan",24))}function M(n,t){if(1&n&&p.Tb(0,"nz-alert",25),2&n){var e=p.jc();p.qc("nzDescription",null==e.submitState?null:e.submitState.errorMessage)}}function q(n,t){1&n&&p.Tb(0,"nz-alert",26)}var _,E,F,V=((F=function(){function n(t){_classCallCheck(this,n),this.fb=t,this.isPasswordVisible=!1,this.submitStateChange=new p.n,this.submitForm=new p.n}return _createClass(n,[{key:"ngOnInit",value:function(){this.initializeForm()}},{key:"onTogglePasswordVisibility",value:function(){this.isPasswordVisible=!this.isPasswordVisible}},{key:"onToggleSignIn",value:function(){if(!this.isSubmitLoading){var n={isSignIn:!this.submitState.isSignIn,isSubmitting:!1,hasSubmitted:!1,hasError:!1};this.submitStateChange.emit(n),n.isSignIn?this.form.removeControl("role"):this.form.addControl("role",this.fb.control("STUDENT",[o.o.required]))}}},{key:"onSubmit",value:function(){this.submitStateChange.emit({isSignIn:this.submitState.isSignIn,isSubmitting:!0,hasSubmitted:!1,hasError:!1}),this.submitForm.emit(Object.assign({},this.form.value))}},{key:"initializeForm",value:function(){this.form=this.fb.group({username:[null,[o.o.required,o.o.minLength(4),o.o.maxLength(20)]],password:[null,[o.o.required,o.o.minLength(8),o.o.maxLength(20),o.o.pattern(/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/)]],remember:[!1]},{updateOn:"blur"})}},{key:"passwordInputType",get:function(){return this.isPasswordVisible?"text":"password"}},{key:"passwordIconType",get:function(){return this.isPasswordVisible?"eye-invisible":"eye"}},{key:"isSubmitLoading",get:function(){var n=this.submitState,t=n.isSubmitting,e=n.hasSubmitted,i=n.hasError;return t&&!e&&!i}},{key:"hasRegistered",get:function(){var n=this.submitState,t=n.isSignIn,e=n.hasSubmitted,i=n.hasError;return!t&&e&&!i}}]),n}()).\u0275fac=function(n){return new(n||F)(p.Sb(o.d))},F.\u0275cmp=p.Mb({type:F,selectors:[["laze-auth-form"]],inputs:{submitState:"submitState"},outputs:{submitStateChange:"submitStateChange",submitForm:"submitForm"},decls:38,vars:16,consts:[["nz-form","",1,"auth-form",3,"formGroup","ngSubmit"],["nzFor","username","nz-typography","",3,"nzSpan"],["nzHasFeedback","","nzValidatingTip","Validating...",3,"nzErrorTip"],["nzPrefixIcon","user"],["id","username","type","text","nz-input","","nzSize","large","formControlName","username","placeholder","Your username"],["usernameErrorTemplate",""],["nzFor","password","nz-typography","",3,"nzSpan"],["nzPrefixIcon","lock",3,"nzSuffix"],["id","password","nz-input","","nzSize","large","formControlName","password","placeholder","Your password",3,"type"],["passwordSuffixTemplate",""],["passwordErrorTemplate",""],[4,"ngIf"],["nz-row","",1,"auth-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],[1,"auth-form-forgot"],["class","auth-form-margin","nzType","error","nzCloseable","","nzMessage","Authentication error",3,"nzDescription",4,"ngIf"],["class","auth-form-margin","nzType","success","nzCloseable","","nzMessage","Registration successful","nzDescription","Please wait at least an hour for account confirmation",4,"ngIf"],["nz-button","","nz-typography","","nzType","primary",1,"sign-in-button","auth-form-margin",3,"disabled","nzLoading"],[1,"register-link",3,"click"],["nz-icon","",3,"nzType","click"],["nzFor","role","nz-typography","",3,"nzSpan"],["id","role","formControlName","role","nzButtonStyle","solid"],["nz-radio-button","","nzValue","STUDENT"],["nz-radio-button","","nzValue","SERVICE_PROVIDER"],["nzType","error","nzCloseable","","nzMessage","Authentication error",1,"auth-form-margin",3,"nzDescription"],["nzType","success","nzCloseable","","nzMessage","Registration successful","nzDescription","Please wait at least an hour for account confirmation",1,"auth-form-margin"]],template:function(n,t){if(1&n&&(p.Yb(0,"form",0),p.gc("ngSubmit",(function(){return t.onSubmit()})),p.Yb(1,"nz-form-item"),p.Yb(2,"nz-form-label",1),p.Yb(3,"strong"),p.Hc(4,"Username"),p.Xb(),p.Xb(),p.Yb(5,"nz-form-control",2),p.Yb(6,"nz-input-group",3),p.Tb(7,"input",4),p.Xb(),p.Fc(8,w,3,3,"ng-template",null,5,p.Gc),p.Xb(),p.Xb(),p.Yb(10,"nz-form-item"),p.Yb(11,"nz-form-label",6),p.Yb(12,"strong"),p.Hc(13,"Password"),p.Xb(),p.Xb(),p.Yb(14,"nz-form-control",2),p.Yb(15,"nz-input-group",7),p.Tb(16,"input",8),p.Xb(),p.Fc(17,I,1,1,"ng-template",null,9,p.Gc),p.Fc(19,k,4,4,"ng-template",null,10,p.Gc),p.Xb(),p.Xb(),p.Fc(21,O,12,1,"nz-form-item",11),p.Yb(22,"div",12),p.Yb(23,"div",13),p.Yb(24,"label",14),p.Yb(25,"span"),p.Hc(26,"Remember me"),p.Xb(),p.Xb(),p.Xb(),p.Yb(27,"div",13),p.Yb(28,"a",15),p.Hc(29,"Forgot password?"),p.Xb(),p.Xb(),p.Xb(),p.Fc(30,M,1,1,"nz-alert",16),p.Fc(31,q,1,0,"nz-alert",17),p.Yb(32,"button",18),p.Yb(33,"strong"),p.Hc(34),p.Xb(),p.Xb(),p.Hc(35," or "),p.Yb(36,"a",19),p.gc("click",(function(){return t.onToggleSignIn()})),p.Hc(37),p.Xb(),p.Xb()),2&n){var e=p.yc(9),i=p.yc(18),r=p.yc(20);p.qc("formGroup",t.form),p.Cb(2),p.qc("nzSpan",24),p.Cb(3),p.qc("nzErrorTip",e),p.Cb(6),p.qc("nzSpan",24),p.Cb(3),p.qc("nzErrorTip",r),p.Cb(1),p.qc("nzSuffix",i),p.Cb(1),p.qc("type",t.passwordInputType),p.Cb(5),p.qc("ngIf",!t.submitState.isSignIn),p.Cb(2),p.qc("nzSpan",12),p.Cb(4),p.qc("nzSpan",12),p.Cb(3),p.qc("ngIf",t.submitState.hasError),p.Cb(1),p.qc("ngIf",t.hasRegistered),p.Cb(1),p.qc("disabled",t.form.invalid)("nzLoading",t.isSubmitLoading),p.Cb(2),p.Ic(t.submitState.isSignIn?"Sign in":"Register"),p.Cb(3),p.Jc(" ",t.submitState.isSignIn?"Register":"Sign in"," ")}},directives:[o.p,o.l,s.b,o.g,a.c,s.c,a.a,s.d,s.a,b.b,b.a,o.c,o.k,o.f,b.c,i.m,u.a,c.a,S.a,z.a,m.a,g.c,g.b,g.a,l.a],styles:[".auth-form-margin[_ngcontent-%COMP%]{margin-top:16px}.auth-form-forgot[_ngcontent-%COMP%]{float:right}.sign-in-button[_ngcontent-%COMP%]{width:40%}"]}),F),H=((E=function(){function n(t,e,i){_classCallCheck(this,n),this.route=t,this.router=e,this.auth=i,this.submitState={isSignIn:!0,isSubmitting:!1,hasSubmitted:!1,hasError:!1}}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"onSubmitStateChange",value:function(n){this.submitState=Object.assign({},n)}},{key:"onSubmitForm",value:function(n){this.submitState.isSignIn?this.signIn(n):this.signUp(n)}},{key:"signUp",value:function(n){var t=this;this.auth.signUp(Object.assign({},n)).pipe(Object(f.a)((function(n){t.submitState={isSignIn:t.submitState.isSignIn,isSubmitting:!1,hasSubmitted:!0,hasError:!1}})),Object(h.a)((function(n){return t.submitState={isSignIn:t.submitState.isSignIn,isSubmitting:!1,hasSubmitted:!1,hasError:!0,errorMessage:n.message},n}))).subscribe()}},{key:"signIn",value:function(n){var t=this;this.auth.signIn(Object.assign({},n)).pipe(Object(f.a)((function(n){var e;t.submitState={isSignIn:t.submitState.isSignIn,isSubmitting:!1,hasSubmitted:!0,hasError:!1};var i=null!==(e=t.route.snapshot.queryParamMap.get("returnUrl"))&&void 0!==e?e:"/main";t.router.navigateByUrl(i)})),Object(h.a)((function(n){return t.submitState={isSignIn:t.submitState.isSignIn,isSubmitting:!1,hasSubmitted:!1,hasError:!0,errorMessage:n.message},n}))).subscribe()}}]),n}()).\u0275fac=function(n){return new(n||E)(p.Sb(r.a),p.Sb(r.f),p.Sb(d.a))},E.\u0275cmp=p.Mb({type:E,selectors:[["ng-component"]],decls:10,vars:1,consts:[["nz-row","",1,"container"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","12",1,"form-container"],[1,"form-card"],["src","assets/svg/logo.svg","alt","Laze logo","width","96"],["nz-typography",""],[3,"submitState","submitStateChange","submitForm"],["nz-col","","nzXs","0","nzSm","0","nzMd","0","nzLg","12",1,"pic-container"],["src","assets/svg/student.svg","alt","Student","width","60%"]],template:function(n,t){1&n&&(p.Yb(0,"div",0),p.Yb(1,"div",1),p.Yb(2,"div",2),p.Tb(3,"img",3),p.Yb(4,"h2",4),p.Yb(5,"strong"),p.Hc(6,"Authenticate your account"),p.Xb(),p.Xb(),p.Yb(7,"laze-auth-form",5),p.gc("submitStateChange",(function(n){return t.onSubmitStateChange(n)}))("submitForm",(function(n){return t.onSubmitForm(n)})),p.Xb(),p.Xb(),p.Xb(),p.Yb(8,"div",6),p.Tb(9,"img",7),p.Xb(),p.Xb()),2&n&&(p.Cb(7),p.qc("submitState",t.submitState))},directives:[a.c,a.a,V],styles:[".container[_ngcontent-%COMP%]{height:100vh}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:86%}.form-card[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{display:block;margin:auto}.pic-container[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center;background-color:#f4f4f9}.pic-container[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{display:none}@media (min-width:576px){.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:78%}}@media (min-width:768px){.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:58%}}@media (min-width:992px){.pic-container[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{display:block}}"]}),E),x=((_=function n(){_classCallCheck(this,n)}).\u0275mod=p.Qb({type:_}),_.\u0275inj=p.Pb({factory:function(n){return new(n||_)},imports:[[i.c,r.i.forChild([{path:"",component:H}]),o.h,o.n,a.b,s.e,b.d,c.c,u.b,m.b,g.d,l.b]]}),_)}}]);