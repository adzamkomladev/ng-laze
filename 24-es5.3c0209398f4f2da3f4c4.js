function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{Kq6Y:function(e,n,t){"use strict";t.r(n),t.d(n,"UsersModule",(function(){return D}));var i=t("ofXK"),r=t("tyNb"),c=t("B+r4"),s=t("JA5x"),a=t("ZE2D"),o=t("FwiY"),u=t("jPNr"),l=t("ZyQt"),b=t("Nqz0"),d=t("PScX"),p=t("qAZ0"),f=t("3/1E"),g=t("Brhd"),h=t("TzFQ"),m=t("vkgz"),z=t("JIr8"),v=t("nYR2"),C=t("fXoL"),y=t("DD7I"),A=t("Q8cG");function w(e,n){if(1&e&&C.Tb(0,"img",12),2&e){var t=C.jc();C.sc("alt","",null==t.user?null:t.user.username,"'s profile image"),C.qc("src",t.profileImageUrl,C.Bc)}}function M(e,n){if(1&e){var t=C.Zb();C.Yb(0,"i",14),C.gc("click",(function(){return C.zc(t),C.jc(2).onAction("EDIT")})),C.Xb()}}function k(e,n){if(1&e&&C.Fc(0,M,1,0,"i",13),2&e){var t=C.jc();C.qc("ngIf",t.isOwner)}}function I(e,n){if(1&e){var t=C.Zb();C.Yb(0,"i",15),C.gc("click",(function(){return C.zc(t),C.jc().onAction("VIEW")})),C.Xb()}}function S(e,n){if(1&e){var t=C.Zb();C.Yb(0,"li",20),C.gc("click",(function(){return C.zc(t),C.jc(3).onAction("MAKE_ADMIN")})),C.Hc(1," Make admin "),C.Xb()}}function P(e,n){if(1&e){var t=C.Zb();C.Yb(0,"div"),C.Tb(1,"i",17),C.Yb(2,"nz-dropdown-menu",null,18),C.Yb(4,"ul",19),C.Yb(5,"li",20),C.gc("click",(function(){return C.zc(t),C.jc(2).onAction("APPROVE")})),C.Hc(6),C.Xb(),C.Fc(7,S,2,0,"li",21),C.Xb(),C.Xb(),C.Xb()}if(2&e){var i=C.yc(3),r=C.jc(2);C.Cb(1),C.qc("nzDropdownMenu",i),C.Cb(5),C.Jc(" ",null!=r.user&&r.user.approved?"Disapprove":"Approve"," "),C.Cb(1),C.qc("ngIf",!r.isAdmin)}}function O(e,n){if(1&e&&C.Fc(0,P,8,3,"div",16),2&e){var t=C.jc();C.qc("ngIf",t.isAdmin)}}var X,U=function(e,n,t){return[e,n,t]},_=((X=function(){function e(){_classCallCheck(this,e),this.cardAction=new C.n,this.profileImageUrl="https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"}return _createClass(e,[{key:"ngOnInit",value:function(){var e,n;this.profileImageUrl=null!==(n=null===(e=this.user)||void 0===e?void 0:e.profileImageUrl)&&void 0!==n?n:this.profileImageUrl}},{key:"onAction",value:function(e){this.isSubmitting=this.showLoader=!0,this.cardAction.emit(e)}},{key:"hasSubmitted",set:function(e){this.showLoader=!e&&this.isSubmitting,this.isSubmitting=this.showLoader}},{key:"isAdmin",get:function(){var e;return"ADMIN"===(null===(e=this.currentUser)||void 0===e?void 0:e.role)}},{key:"isOwner",get:function(){var e,n;return(null===(e=this.currentUser)||void 0===e?void 0:e.id)===(null===(n=this.user)||void 0===n?void 0:n.id)}}]),e}()).\u0275fac=function(e){return new(e||X)},X.\u0275cmp=C.Mb({type:X,selectors:[["laze-user-card"]],inputs:{user:"user",currentUser:"currentUser",hasSubmitted:"hasSubmitted"},outputs:{cardAction:"cardAction"},decls:27,vars:16,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"nzCover","nzActions"],[1,"card-body"],["typography",""],[3,"href"],["nz-icon","","nzType","phone"],["nz-icon","","nzType","mail"],["nzColor","#337357"],["coverTemplate",""],["actionEdit",""],["actionView",""],["actionMore",""],[3,"alt","src"],["nz-icon","","nzType","edit",3,"click",4,"ngIf"],["nz-icon","","nzType","edit",3,"click"],["nz-icon","","nzType","eye",3,"click"],[4,"ngIf"],["nz-icon","","nzType","more","nz-dropdown","","nzPlacement","topCenter",3,"nzDropdownMenu"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-menu-item","",3,"click",4,"ngIf"]],template:function(e,n){if(1&e&&(C.Yb(0,"nz-spin",0),C.Yb(1,"nz-card",1),C.Yb(2,"div",2),C.Yb(3,"h3",3),C.Yb(4,"strong"),C.Hc(5),C.Xb(),C.Xb(),C.Yb(6,"p"),C.Yb(7,"a",4),C.Tb(8,"i",5),C.Hc(9),C.Xb(),C.Xb(),C.Yb(10,"p"),C.Yb(11,"a",4),C.Tb(12,"i",6),C.Hc(13),C.Xb(),C.Xb(),C.Yb(14,"p"),C.Hc(15),C.Xb(),C.Yb(16,"nz-tag",7),C.Hc(17),C.kc(18,"titlecase"),C.Xb(),C.Xb(),C.Xb(),C.Xb(),C.Fc(19,w,1,2,"ng-template",null,8,C.Gc),C.Fc(21,k,1,1,"ng-template",null,9,C.Gc),C.Fc(23,I,1,0,"ng-template",null,10,C.Gc),C.Fc(25,O,1,1,"ng-template",null,11,C.Gc)),2&e){var t=C.yc(20),i=C.yc(22),r=C.yc(24),c=C.yc(26);C.qc("nzSpinning",n.showLoader&&n.isSubmitting),C.Cb(1),C.qc("nzCover",t)("nzActions",C.wc(12,U,i,r,c)),C.Cb(4),C.Ic(null==n.user?null:n.user.username),C.Cb(2),C.sc("href","tel:",null==n.user?null:n.user.telephone,"",C.Bc),C.Cb(2),C.Jc(" ",(null==n.user?null:n.user.telephone)||"N/A"," "),C.Cb(2),C.sc("href","mailto:",null==n.user?null:n.user.email,"",C.Bc),C.Cb(2),C.Jc(" ",(null==n.user?null:n.user.email)||"N/A"," "),C.Cb(2),C.Jc(" ",(null==n.user?null:n.user.careerDetails)||"N/A"," "),C.Cb(2),C.Ic(C.lc(18,10,null==n.user?null:n.user.role))}},directives:[p.a,s.a,o.a,l.a,i.m,b.a,b.c,A.c,A.d],pipes:[i.v],styles:["nz-card[_ngcontent-%COMP%]{margin:auto;width:280px;text-align:center;box-shadow:0 2px 2px #bababa}.card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:3px}.card-body[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:12px}.card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#337357}"]}),X);function Y(e,n){if(1&e){var t=C.Zb();C.Yb(0,"laze-user-card",4),C.gc("cardAction",(function(e){C.zc(t);var i=n.$implicit;return C.jc().onCardAction(e,i)})),C.Xb()}if(2&e){var i=n.$implicit,r=C.jc();C.qc("user",i)("currentUser",r.currentUser)("hasSubmitted",r.hasSubmitted)}}var T,j,x=((j=function(){function e(n,t,i,r){_classCallCheck(this,e),this.route=n,this.router=t,this.nzMessageService=i,this.userService=r,this.hasSubmitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.users=this.route.snapshot.data.users,this.currentUser=this.route.snapshot.data.currentUser,this.onPageIndexChange(1)}},{key:"onPageIndexChange",value:function(e){this.usersToDisplay=this.users.slice(10*(e-1),10*e)}},{key:"onCardAction",value:function(e,n){switch(this.hasSubmitted=!1,e){case"EDIT":case"VIEW":this.viewOrEditUser(n);break;case"APPROVE":this.approveUser(n);break;case"MAKE_ADMIN":this.makeUserAdmin(n)}}},{key:"viewOrEditUser",value:function(e){this.router.navigate(["main","user",e.id])}},{key:"makeUserAdmin",value:function(e){var n=this;this.userService.update({id:e.id,role:"ADMIN"}).pipe(Object(m.a)((function(e){return n.nzMessageService.success("User is now an ADMIN!")})),Object(z.a)((function(e){return n.nzMessageService.error(e.message),e})),Object(v.a)((function(){return n.hasSubmitted=!0}))).subscribe()}},{key:"approveUser",value:function(e){var n=this;this.userService.update({id:e.id,approved:!(null==e?void 0:e.approved)}).pipe(Object(m.a)((function(e){return n.nzMessageService.success("User has been approved!")})),Object(z.a)((function(e){return n.nzMessageService.error(e.message),e})),Object(v.a)((function(){return n.hasSubmitted=!0}))).subscribe()}}]),e}()).\u0275fac=function(e){return new(e||j)(C.Sb(r.a),C.Sb(r.f),C.Sb(d.b),C.Sb(y.a))},j.\u0275cmp=C.Mb({type:j,selectors:[["ng-component"]],decls:4,vars:3,consts:[["nzTitle","Users","nzSubtitle","All users of the system",1,"site-page-header"],["nz-row","",1,"user-cards"],["nz-col","","nzXs","24","nzSm","24","nzMd","9","nzLg","10","nzXl","7",3,"user","currentUser","hasSubmitted","cardAction",4,"ngFor","ngForOf"],[3,"nzPageIndex","nzTotal","nzPageIndexChange"],["nz-col","","nzXs","24","nzSm","24","nzMd","9","nzLg","10","nzXl","7",3,"user","currentUser","hasSubmitted","cardAction"]],template:function(e,n){1&e&&(C.Tb(0,"nz-page-header",0),C.Yb(1,"div",1),C.Fc(2,Y,1,3,"laze-user-card",2),C.Xb(),C.Yb(3,"nz-pagination",3),C.gc("nzPageIndexChange",(function(e){return n.onPageIndexChange(e)})),C.Xb()),2&e&&(C.Cb(2),C.qc("ngForOf",n.usersToDisplay),C.Cb(1),C.qc("nzPageIndex",1)("nzTotal",n.users.length))},directives:[u.a,c.c,i.l,f.a,_,c.a],styles:["nz-page-header[_ngcontent-%COMP%]{margin-bottom:24px}.user-cards[_ngcontent-%COMP%]{justify-content:center}.user-cards[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:24px}nz-pagination[_ngcontent-%COMP%]{text-align:center}@media (min-width:768px){.user-cards[_ngcontent-%COMP%]{justify-content:space-between}}"]}),j),D=((T=function e(){_classCallCheck(this,e)}).\u0275mod=C.Qb({type:T}),T.\u0275inj=C.Pb({factory:function(e){return new(e||T)},imports:[[i.c,r.i.forChild([{path:"",component:x,resolve:{users:g.a,currentUser:h.a}}]),c.b,s.b,a.b,o.b,u.b,l.b,b.b,d.a,p.b,f.b]]}),T)}}]);