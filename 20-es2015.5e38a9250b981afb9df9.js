(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{Yj9t:function(t,n,i){"use strict";i.r(n),i.d(n,"AuthModule",(function(){return _}));var e=i("ofXK"),r=i("tyNb"),s=i("3Pt+"),o=i("B+r4"),a=i("ocnv"),c=i("OzZK"),b=i("TaO5"),u=i("PTRe"),m=i("FwiY"),g=i("bE2y"),l=i("Wfee"),h=i("vkgz"),p=i("JIr8"),f=i("fXoL"),d=i("7dP1"),S=i("RwU8"),z=i("C2AL");function C(t,n){1&t&&(f.Wb(0),f.Hc(1," Please input your username! "),f.Vb())}function y(t,n){1&t&&(f.Wb(0),f.Hc(1," Your username must be more than 4 characters! "),f.Vb())}function w(t,n){1&t&&(f.Wb(0),f.Hc(1," Your username must be less than 20 characters! "),f.Vb())}function I(t,n){if(1&t&&(f.Fc(0,C,2,0,"ng-container",11),f.Fc(1,y,2,0,"ng-container",11),f.Fc(2,w,2,0,"ng-container",11)),2&t){const t=n.$implicit;f.qc("ngIf",t.hasError("required")),f.Cb(1),f.qc("ngIf",t.hasError("minlength")),f.Cb(1),f.qc("ngIf",t.hasError("maxlength"))}}function Y(t,n){if(1&t){const t=f.Zb();f.Yb(0,"i",20),f.gc("click",(function(){return f.zc(t),f.jc().onTogglePasswordVisibility()})),f.Xb()}if(2&t){const t=f.jc();f.qc("nzType",t.passwordIconType)}}function X(t,n){1&t&&(f.Wb(0),f.Hc(1," Please input your password! "),f.Vb())}function P(t,n){1&t&&(f.Wb(0),f.Hc(1," Your password must be more than 8 characters! "),f.Vb())}function T(t,n){1&t&&(f.Wb(0),f.Hc(1," Your password must be less than 20 characters! "),f.Vb())}function O(t,n){1&t&&(f.Wb(0),f.Hc(1," Your password should include at least an uppercase letter, numbers and special characters! "),f.Vb())}function M(t,n){if(1&t&&(f.Fc(0,X,2,0,"ng-container",11),f.Fc(1,P,2,0,"ng-container",11),f.Fc(2,T,2,0,"ng-container",11),f.Fc(3,O,2,0,"ng-container",11)),2&t){const t=n.$implicit;f.qc("ngIf",t.hasError("required")),f.Cb(1),f.qc("ngIf",t.hasError("minlength")),f.Cb(1),f.qc("ngIf",t.hasError("maxlength")),f.Cb(1),f.qc("ngIf",t.hasError("pattern"))}}function q(t,n){1&t&&(f.Yb(0,"nz-form-item"),f.Yb(1,"nz-form-label",21),f.Yb(2,"strong"),f.Hc(3,"Role"),f.Xb(),f.Xb(),f.Yb(4,"nz-form-control"),f.Yb(5,"nz-radio-group",22),f.Yb(6,"label",23),f.Yb(7,"strong"),f.Hc(8,"Student"),f.Xb(),f.Xb(),f.Yb(9,"label",24),f.Yb(10,"strong"),f.Hc(11,"Service provider"),f.Xb(),f.Xb(),f.Xb(),f.Xb(),f.Xb()),2&t&&(f.Cb(1),f.qc("nzSpan",24))}function F(t,n){if(1&t&&f.Tb(0,"nz-alert",25),2&t){const t=f.jc();f.qc("nzDescription",null==t.submitState?null:t.submitState.errorMessage)}}function v(t,n){1&t&&f.Tb(0,"nz-alert",26)}let E=(()=>{class t{constructor(t){this.fb=t,this.isPasswordVisible=!1,this.submitStateChange=new f.n,this.submitForm=new f.n}get passwordInputType(){return this.isPasswordVisible?"text":"password"}get passwordIconType(){return this.isPasswordVisible?"eye-invisible":"eye"}get isSubmitLoading(){const{isSubmitting:t,hasSubmitted:n,hasError:i}=this.submitState;return t&&!n&&!i}get hasRegistered(){const{isSignIn:t,hasSubmitted:n,hasError:i}=this.submitState;return!t&&n&&!i}ngOnInit(){this.initializeForm()}onTogglePasswordVisibility(){this.isPasswordVisible=!this.isPasswordVisible}onToggleSignIn(){if(this.isSubmitLoading)return;const t={isSignIn:!this.submitState.isSignIn,isSubmitting:!1,hasSubmitted:!1,hasError:!1};this.submitStateChange.emit(t),t.isSignIn?this.form.removeControl("role"):this.form.addControl("role",this.fb.control("STUDENT",[s.o.required]))}onSubmit(){this.submitStateChange.emit({isSignIn:this.submitState.isSignIn,isSubmitting:!0,hasSubmitted:!1,hasError:!1}),this.submitForm.emit(Object.assign({},this.form.value))}initializeForm(){this.form=this.fb.group({username:[null,[s.o.required,s.o.minLength(4),s.o.maxLength(20)]],password:[null,[s.o.required,s.o.minLength(8),s.o.maxLength(20),s.o.pattern(/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/)]],remember:[!1]},{updateOn:"blur"})}}return t.\u0275fac=function(n){return new(n||t)(f.Sb(s.d))},t.\u0275cmp=f.Mb({type:t,selectors:[["laze-auth-form"]],inputs:{submitState:"submitState"},outputs:{submitStateChange:"submitStateChange",submitForm:"submitForm"},decls:38,vars:16,consts:[["nz-form","",1,"auth-form",3,"formGroup","ngSubmit"],["nzFor","username","nz-typography","",3,"nzSpan"],["nzHasFeedback","","nzValidatingTip","Validating...",3,"nzErrorTip"],["nzPrefixIcon","user"],["id","username","type","text","nz-input","","nzSize","large","formControlName","username","placeholder","Your username"],["usernameErrorTemplate",""],["nzFor","password","nz-typography","",3,"nzSpan"],["nzPrefixIcon","lock",3,"nzSuffix"],["id","password","nz-input","","nzSize","large","formControlName","password","placeholder","Your password",3,"type"],["passwordSuffixTemplate",""],["passwordErrorTemplate",""],[4,"ngIf"],["nz-row","",1,"auth-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],[1,"auth-form-forgot"],["class","auth-form-margin","nzType","error","nzCloseable","","nzMessage","Authentication error",3,"nzDescription",4,"ngIf"],["class","auth-form-margin","nzType","success","nzCloseable","","nzMessage","Registration successful","nzDescription","Please wait at least an hour for account confirmation",4,"ngIf"],["nz-button","","nz-typography","","nzType","primary",1,"sign-in-button","auth-form-margin",3,"disabled","nzLoading"],[1,"register-link",3,"click"],["nz-icon","",3,"nzType","click"],["nzFor","role","nz-typography","",3,"nzSpan"],["id","role","formControlName","role","nzButtonStyle","solid"],["nz-radio-button","","nzValue","STUDENT"],["nz-radio-button","","nzValue","SERVICE_PROVIDER"],["nzType","error","nzCloseable","","nzMessage","Authentication error",1,"auth-form-margin",3,"nzDescription"],["nzType","success","nzCloseable","","nzMessage","Registration successful","nzDescription","Please wait at least an hour for account confirmation",1,"auth-form-margin"]],template:function(t,n){if(1&t&&(f.Yb(0,"form",0),f.gc("ngSubmit",(function(){return n.onSubmit()})),f.Yb(1,"nz-form-item"),f.Yb(2,"nz-form-label",1),f.Yb(3,"strong"),f.Hc(4,"Username"),f.Xb(),f.Xb(),f.Yb(5,"nz-form-control",2),f.Yb(6,"nz-input-group",3),f.Tb(7,"input",4),f.Xb(),f.Fc(8,I,3,3,"ng-template",null,5,f.Gc),f.Xb(),f.Xb(),f.Yb(10,"nz-form-item"),f.Yb(11,"nz-form-label",6),f.Yb(12,"strong"),f.Hc(13,"Password"),f.Xb(),f.Xb(),f.Yb(14,"nz-form-control",2),f.Yb(15,"nz-input-group",7),f.Tb(16,"input",8),f.Xb(),f.Fc(17,Y,1,1,"ng-template",null,9,f.Gc),f.Fc(19,M,4,4,"ng-template",null,10,f.Gc),f.Xb(),f.Xb(),f.Fc(21,q,12,1,"nz-form-item",11),f.Yb(22,"div",12),f.Yb(23,"div",13),f.Yb(24,"label",14),f.Yb(25,"span"),f.Hc(26,"Remember me"),f.Xb(),f.Xb(),f.Xb(),f.Yb(27,"div",13),f.Yb(28,"a",15),f.Hc(29,"Forgot password?"),f.Xb(),f.Xb(),f.Xb(),f.Fc(30,F,1,1,"nz-alert",16),f.Fc(31,v,1,0,"nz-alert",17),f.Yb(32,"button",18),f.Yb(33,"strong"),f.Hc(34),f.Xb(),f.Xb(),f.Hc(35," or "),f.Yb(36,"a",19),f.gc("click",(function(){return n.onToggleSignIn()})),f.Hc(37),f.Xb(),f.Xb()),2&t){const t=f.yc(9),i=f.yc(18),e=f.yc(20);f.qc("formGroup",n.form),f.Cb(2),f.qc("nzSpan",24),f.Cb(3),f.qc("nzErrorTip",t),f.Cb(6),f.qc("nzSpan",24),f.Cb(3),f.qc("nzErrorTip",e),f.Cb(1),f.qc("nzSuffix",i),f.Cb(1),f.qc("type",n.passwordInputType),f.Cb(5),f.qc("ngIf",!n.submitState.isSignIn),f.Cb(2),f.qc("nzSpan",12),f.Cb(4),f.qc("nzSpan",12),f.Cb(3),f.qc("ngIf",n.submitState.hasError),f.Cb(1),f.qc("ngIf",n.hasRegistered),f.Cb(1),f.qc("disabled",n.form.invalid)("nzLoading",n.isSubmitLoading),f.Cb(2),f.Ic(n.submitState.isSignIn?"Sign in":"Register"),f.Cb(3),f.Jc(" ",n.submitState.isSignIn?"Register":"Sign in"," ")}},directives:[s.p,s.l,a.b,s.g,o.c,a.c,o.a,a.d,a.a,u.b,u.a,s.c,s.k,s.f,u.c,e.m,b.a,c.a,S.a,z.a,m.a,g.c,g.b,g.a,l.a],styles:[".auth-form-margin[_ngcontent-%COMP%]{margin-top:16px}.auth-form-forgot[_ngcontent-%COMP%]{float:right}.sign-in-button[_ngcontent-%COMP%]{width:40%}"]}),t})(),V=(()=>{class t{constructor(t,n,i){this.route=t,this.router=n,this.auth=i,this.submitState={isSignIn:!0,isSubmitting:!1,hasSubmitted:!1,hasError:!1}}ngOnInit(){}onSubmitStateChange(t){this.submitState=Object.assign({},t)}onSubmitForm(t){this.submitState.isSignIn?this.signIn(t):this.signUp(t)}signUp(t){this.auth.signUp(Object.assign({},t)).pipe(Object(h.a)(t=>{this.submitState={isSignIn:this.submitState.isSignIn,isSubmitting:!1,hasSubmitted:!0,hasError:!1}}),Object(p.a)(t=>(this.submitState={isSignIn:this.submitState.isSignIn,isSubmitting:!1,hasSubmitted:!1,hasError:!0,errorMessage:t.message},t))).subscribe()}signIn(t){this.auth.signIn(Object.assign({},t)).pipe(Object(h.a)(t=>{var n;this.submitState={isSignIn:this.submitState.isSignIn,isSubmitting:!1,hasSubmitted:!0,hasError:!1};const i=null!==(n=this.route.snapshot.queryParamMap.get("returnUrl"))&&void 0!==n?n:"/main";this.router.navigateByUrl(i)}),Object(p.a)(t=>(this.submitState={isSignIn:this.submitState.isSignIn,isSubmitting:!1,hasSubmitted:!1,hasError:!0,errorMessage:t.message},t))).subscribe()}}return t.\u0275fac=function(n){return new(n||t)(f.Sb(r.a),f.Sb(r.f),f.Sb(d.a))},t.\u0275cmp=f.Mb({type:t,selectors:[["ng-component"]],decls:10,vars:1,consts:[["nz-row","",1,"container"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","12",1,"form-container"],[1,"form-card"],["src","assets/svg/logo.svg","alt","Laze logo","width","96"],["nz-typography",""],[3,"submitState","submitStateChange","submitForm"],["nz-col","","nzXs","0","nzSm","0","nzMd","0","nzLg","12",1,"pic-container"],["src","assets/svg/student.svg","alt","Student","width","60%"]],template:function(t,n){1&t&&(f.Yb(0,"div",0),f.Yb(1,"div",1),f.Yb(2,"div",2),f.Tb(3,"img",3),f.Yb(4,"h2",4),f.Yb(5,"strong"),f.Hc(6,"Authenticate your account"),f.Xb(),f.Xb(),f.Yb(7,"laze-auth-form",5),f.gc("submitStateChange",(function(t){return n.onSubmitStateChange(t)}))("submitForm",(function(t){return n.onSubmitForm(t)})),f.Xb(),f.Xb(),f.Xb(),f.Yb(8,"div",6),f.Tb(9,"img",7),f.Xb(),f.Xb()),2&t&&(f.Cb(7),f.qc("submitState",n.submitState))},directives:[o.c,o.a,E],styles:[".container[_ngcontent-%COMP%]{height:100vh}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:86%}.form-card[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{display:block;margin:auto}.pic-container[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center;background-color:#f4f4f9}.pic-container[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{display:none}@media (min-width:576px){.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:78%}}@media (min-width:768px){.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:58%}}@media (min-width:992px){.pic-container[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{display:block}}"]}),t})(),_=(()=>{class t{}return t.\u0275mod=f.Qb({type:t}),t.\u0275inj=f.Pb({factory:function(n){return new(n||t)},imports:[[e.c,r.i.forChild([{path:"",component:V}]),s.h,s.n,o.b,a.e,u.d,c.c,b.b,m.b,g.d,l.b]]}),t})()}}]);