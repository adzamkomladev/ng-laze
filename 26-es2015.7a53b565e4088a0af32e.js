(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{Kq6Y:function(n,e,t){"use strict";t.r(e),t.d(e,"UsersModule",(function(){return x}));var i=t("ofXK"),c=t("tyNb"),s=t("B+r4"),r=t("JA5x"),o=t("ZE2D"),a=t("FwiY"),u=t("jPNr"),l=t("ZyQt"),b=t("Nqz0"),d=t("PScX"),p=t("qAZ0"),g=t("3/1E"),h=t("Brhd"),m=t("TzFQ"),z=t("vkgz"),f=t("JIr8"),v=t("nYR2"),A=t("fXoL"),C=t("DD7I"),M=t("Q8cG");function w(n,e){if(1&n&&A.Tb(0,"img",12),2&n){const n=A.jc();A.sc("alt","",null==n.user?null:n.user.username,"'s profile image"),A.qc("src",n.profileImageUrl,A.Bc)}}function I(n,e){if(1&n){const n=A.Zb();A.Yb(0,"i",14),A.gc("click",(function(){return A.zc(n),A.jc(2).onAction("EDIT")})),A.Xb()}}function S(n,e){if(1&n&&A.Fc(0,I,1,0,"i",13),2&n){const n=A.jc();A.qc("ngIf",n.isOwner)}}function y(n,e){if(1&n){const n=A.Zb();A.Yb(0,"i",15),A.gc("click",(function(){return A.zc(n),A.jc().onAction("VIEW")})),A.Xb()}}function O(n,e){if(1&n){const n=A.Zb();A.Yb(0,"li",20),A.gc("click",(function(){return A.zc(n),A.jc(3).onAction("MAKE_ADMIN")})),A.Hc(1," Make admin "),A.Xb()}}function P(n,e){if(1&n){const n=A.Zb();A.Yb(0,"div"),A.Tb(1,"i",17),A.Yb(2,"nz-dropdown-menu",null,18),A.Yb(4,"ul",19),A.Yb(5,"li",20),A.gc("click",(function(){return A.zc(n),A.jc(2).onAction("APPROVE")})),A.Hc(6),A.Xb(),A.Fc(7,O,2,0,"li",21),A.Xb(),A.Xb(),A.Xb()}if(2&n){const n=A.yc(3),e=A.jc(2);A.Cb(1),A.qc("nzDropdownMenu",n),A.Cb(5),A.Jc(" ",null!=e.user&&e.user.approved?"Disapprove":"Approve"," "),A.Cb(1),A.qc("ngIf",!e.isAdmin)}}function X(n,e){if(1&n&&A.Fc(0,P,8,3,"div",16),2&n){const n=A.jc();A.qc("ngIf",n.isAdmin)}}const U=function(n,e,t){return[n,e,t]};let Y=(()=>{class n{constructor(){this.cardAction=new A.n,this.profileImageUrl="https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"}set hasSubmitted(n){this.showLoader=!n&&this.isSubmitting,this.isSubmitting=this.showLoader}get isAdmin(){var n;return"ADMIN"===(null===(n=this.currentUser)||void 0===n?void 0:n.role)}get isOwner(){var n,e;return(null===(n=this.currentUser)||void 0===n?void 0:n.id)===(null===(e=this.user)||void 0===e?void 0:e.id)}ngOnInit(){var n,e;this.profileImageUrl=null!==(e=null===(n=this.user)||void 0===n?void 0:n.profileImageUrl)&&void 0!==e?e:this.profileImageUrl}onAction(n){this.isSubmitting=this.showLoader=!0,this.cardAction.emit(n)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=A.Mb({type:n,selectors:[["laze-user-card"]],inputs:{user:"user",currentUser:"currentUser",hasSubmitted:"hasSubmitted"},outputs:{cardAction:"cardAction"},decls:27,vars:16,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"nzCover","nzActions"],[1,"card-body"],["typography",""],[3,"href"],["nz-icon","","nzType","phone"],["nz-icon","","nzType","mail"],["nzColor","#337357"],["coverTemplate",""],["actionEdit",""],["actionView",""],["actionMore",""],[3,"alt","src"],["nz-icon","","nzType","edit",3,"click",4,"ngIf"],["nz-icon","","nzType","edit",3,"click"],["nz-icon","","nzType","eye",3,"click"],[4,"ngIf"],["nz-icon","","nzType","more","nz-dropdown","","nzPlacement","topCenter",3,"nzDropdownMenu"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-menu-item","",3,"click",4,"ngIf"]],template:function(n,e){if(1&n&&(A.Yb(0,"nz-spin",0),A.Yb(1,"nz-card",1),A.Yb(2,"div",2),A.Yb(3,"h3",3),A.Yb(4,"strong"),A.Hc(5),A.Xb(),A.Xb(),A.Yb(6,"p"),A.Yb(7,"a",4),A.Tb(8,"i",5),A.Hc(9),A.Xb(),A.Xb(),A.Yb(10,"p"),A.Yb(11,"a",4),A.Tb(12,"i",6),A.Hc(13),A.Xb(),A.Xb(),A.Yb(14,"p"),A.Hc(15),A.Xb(),A.Yb(16,"nz-tag",7),A.Hc(17),A.kc(18,"titlecase"),A.Xb(),A.Xb(),A.Xb(),A.Xb(),A.Fc(19,w,1,2,"ng-template",null,8,A.Gc),A.Fc(21,S,1,1,"ng-template",null,9,A.Gc),A.Fc(23,y,1,0,"ng-template",null,10,A.Gc),A.Fc(25,X,1,1,"ng-template",null,11,A.Gc)),2&n){const n=A.yc(20),t=A.yc(22),i=A.yc(24),c=A.yc(26);A.qc("nzSpinning",e.showLoader&&e.isSubmitting),A.Cb(1),A.qc("nzCover",n)("nzActions",A.wc(12,U,t,i,c)),A.Cb(4),A.Ic(null==e.user?null:e.user.username),A.Cb(2),A.sc("href","tel:",null==e.user?null:e.user.telephone,"",A.Bc),A.Cb(2),A.Jc(" ",(null==e.user?null:e.user.telephone)||"N/A"," "),A.Cb(2),A.sc("href","mailto:",null==e.user?null:e.user.email,"",A.Bc),A.Cb(2),A.Jc(" ",(null==e.user?null:e.user.email)||"N/A"," "),A.Cb(2),A.Jc(" ",(null==e.user?null:e.user.careerDetails)||"N/A"," "),A.Cb(2),A.Ic(A.lc(18,10,null==e.user?null:e.user.role))}},directives:[p.a,r.a,a.a,l.a,i.m,b.a,b.c,M.c,M.d],pipes:[i.v],styles:["nz-card[_ngcontent-%COMP%]{margin:auto;width:280px;text-align:center;box-shadow:0 2px 2px #bababa}.card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:3px}.card-body[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:12px}.card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#337357}"]}),n})();function T(n,e){if(1&n){const n=A.Zb();A.Yb(0,"laze-user-card",4),A.gc("cardAction",(function(t){A.zc(n);const i=e.$implicit;return A.jc().onCardAction(t,i)})),A.Xb()}if(2&n){const n=e.$implicit,t=A.jc();A.qc("user",n)("currentUser",t.currentUser)("hasSubmitted",t.hasSubmitted)}}let j=(()=>{class n{constructor(n,e,t,i){this.route=n,this.router=e,this.nzMessageService=t,this.userService=i,this.hasSubmitted=!1}ngOnInit(){this.users=this.route.snapshot.data.users,this.currentUser=this.route.snapshot.data.currentUser,this.onPageIndexChange(1)}onPageIndexChange(n){this.usersToDisplay=this.users.slice(10*(n-1),10*n)}onCardAction(n,e){switch(this.hasSubmitted=!1,n){case"EDIT":case"VIEW":this.viewOrEditUser(e);break;case"APPROVE":this.approveUser(e);break;case"MAKE_ADMIN":this.makeUserAdmin(e)}}viewOrEditUser(n){this.router.navigate(["main","user",n.id])}makeUserAdmin(n){this.userService.update({id:n.id,role:"ADMIN"}).pipe(Object(z.a)(n=>this.nzMessageService.success("User is now an ADMIN!")),Object(f.a)(n=>(this.nzMessageService.error(n.message),n)),Object(v.a)(()=>this.hasSubmitted=!0)).subscribe()}approveUser(n){this.userService.update({id:n.id,approved:!(null==n?void 0:n.approved)}).pipe(Object(z.a)(n=>this.nzMessageService.success("User has been approved!")),Object(f.a)(n=>(this.nzMessageService.error(n.message),n)),Object(v.a)(()=>this.hasSubmitted=!0)).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(A.Sb(c.a),A.Sb(c.f),A.Sb(d.b),A.Sb(C.a))},n.\u0275cmp=A.Mb({type:n,selectors:[["ng-component"]],decls:4,vars:3,consts:[["nzTitle","Users","nzSubtitle","All users of the system",1,"site-page-header"],["nz-row","",1,"user-cards"],["nz-col","","nzXs","24","nzSm","24","nzMd","9","nzLg","10","nzXl","7",3,"user","currentUser","hasSubmitted","cardAction",4,"ngFor","ngForOf"],[3,"nzPageIndex","nzTotal","nzPageIndexChange"],["nz-col","","nzXs","24","nzSm","24","nzMd","9","nzLg","10","nzXl","7",3,"user","currentUser","hasSubmitted","cardAction"]],template:function(n,e){1&n&&(A.Tb(0,"nz-page-header",0),A.Yb(1,"div",1),A.Fc(2,T,1,3,"laze-user-card",2),A.Xb(),A.Yb(3,"nz-pagination",3),A.gc("nzPageIndexChange",(function(n){return e.onPageIndexChange(n)})),A.Xb()),2&n&&(A.Cb(2),A.qc("ngForOf",e.usersToDisplay),A.Cb(1),A.qc("nzPageIndex",1)("nzTotal",e.users.length))},directives:[u.a,s.c,i.l,g.a,Y,s.a],styles:["nz-page-header[_ngcontent-%COMP%]{margin-bottom:24px}.user-cards[_ngcontent-%COMP%]{justify-content:center}.user-cards[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:24px}nz-pagination[_ngcontent-%COMP%]{text-align:center}@media (min-width:768px){.user-cards[_ngcontent-%COMP%]{justify-content:space-between}}"]}),n})(),x=(()=>{class n{}return n.\u0275mod=A.Qb({type:n}),n.\u0275inj=A.Pb({factory:function(e){return new(e||n)},imports:[[i.c,c.i.forChild([{path:"",component:j,resolve:{users:h.a,currentUser:m.a}}]),s.b,r.b,o.b,a.b,u.b,l.b,b.b,d.a,p.b,g.b]]}),n})()}}]);