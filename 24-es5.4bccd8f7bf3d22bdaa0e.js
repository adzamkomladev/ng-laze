function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{ZnwX:function(e,t,n){"use strict";n.r(t),n.d(t,"ProjectModule",(function(){return ze}));var i,r,o,s,a=n("ofXK"),c=n("tyNb"),l=n("3Pt+"),u=n("jPNr"),b=n("B+r4"),d=n("ocnv"),p=n("0lU3"),f=n("D9mS"),h=n("PTRe"),z=n("OzZK"),m=n("ZE2D"),g=n("PScX"),v=n("FwiY"),y=n("rDax"),S=n("fXoL"),C=(n("XNiG"),n("VRyK"),n("xgIS"),n("mrSG")),P=n("FtGj"),F=(n("+rOU"),n("JgHy"),n("/KA4")),j=((i=function e(){_classCallCheck(this,e)}).\u0275mod=S.Qb({type:i}),i.\u0275inj=S.Pb({factory:function(e){return new(e||i)},imports:[[a.c,l.h,y.f,v.b]]}),i),M=n("zAKX"),k=n("Nqz0"),O=n("u47x"),X=["inputElement"],V=((o=function(){function e(t,n,i){_classCallCheck(this,e),this.elementRef=t,this.cdr=n,this.focusMonitor=i,this.isFocused=!1,this.disabledUp=!1,this.disabledDown=!1,this.onChange=function(){},this.onTouched=function(){},this.nzBlur=new S.n,this.nzFocus=new S.n,this.nzSize="default",this.nzMin=-1/0,this.nzMax=1/0,this.nzParser=function(e){return e.trim().replace(/\u3002/g,".").replace(/[^\w\.-]+/g,"")},this.nzPrecisionMode="toFixed",this.nzPlaceHolder="",this.nzStep=1,this.nzId=null,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzFormatter=function(e){return e}}return _createClass(e,[{key:"onModelChange",value:function(e){this.parsedValue=this.nzParser(e),this.inputElement.nativeElement.value="".concat(this.parsedValue);var t=this.getCurrentValidValue(this.parsedValue);this.setValue(t)}},{key:"getCurrentValidValue",value:function(e){var t=e;return t=""===t?"":this.isNotCompleteNumber(t)?this.value:"".concat(this.getValidValue(t)),this.toNumber(t)}},{key:"isNotCompleteNumber",value:function(e){return isNaN(e)||""===e||null===e||!(!e||e.toString().indexOf(".")!==e.toString().length-1)}},{key:"getValidValue",value:function(e){var t=parseFloat(e);return isNaN(t)?e:(t<this.nzMin&&(t=this.nzMin),t>this.nzMax&&(t=this.nzMax),t)}},{key:"toNumber",value:function(e){if(this.isNotCompleteNumber(e))return e;var t=String(e);if(t.indexOf(".")>=0&&Object(F.j)(this.nzPrecision)){if("function"==typeof this.nzPrecisionMode)return this.nzPrecisionMode(e,this.nzPrecision);if("cut"===this.nzPrecisionMode){var n=t.split(".");return n[1]=n[1].slice(0,this.nzPrecision),Number(n.join("."))}return Number(Number(e).toFixed(this.nzPrecision))}return Number(e)}},{key:"getRatio",value:function(e){var t=1;return e.metaKey||e.ctrlKey?t=.1:e.shiftKey&&(t=10),t}},{key:"down",value:function(e,t){this.isFocused||this.focus(),this.step("down",e,t)}},{key:"up",value:function(e,t){this.isFocused||this.focus(),this.step("up",e,t)}},{key:"getPrecision",value:function(e){var t=e.toString();if(t.indexOf("e-")>=0)return parseInt(t.slice(t.indexOf("e-")+2),10);var n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}},{key:"getMaxPrecision",value:function(e,t){if(Object(F.j)(this.nzPrecision))return this.nzPrecision;var n=this.getPrecision(t),i=this.getPrecision(this.nzStep),r=this.getPrecision(e);return e?Math.max(r,n+i):n+i}},{key:"getPrecisionFactor",value:function(e,t){var n=this.getMaxPrecision(e,t);return Math.pow(10,n)}},{key:"upStep",value:function(e,t){var n,i=this.getPrecisionFactor(e,t),r=Math.abs(this.getMaxPrecision(e,t));return n="number"==typeof e?((i*e+i*this.nzStep*t)/i).toFixed(r):this.nzMin===-1/0?this.nzStep:this.nzMin,this.toNumber(n)}},{key:"downStep",value:function(e,t){var n,i=this.getPrecisionFactor(e,t),r=Math.abs(this.getMaxPrecision(e,t));return n="number"==typeof e?((i*e-i*this.nzStep*t)/i).toFixed(r):this.nzMin===-1/0?-this.nzStep:this.nzMin,this.toNumber(n)}},{key:"step",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.stop(),t.preventDefault(),!this.nzDisabled){var r=this.getCurrentValidValue(this.parsedValue)||0,o=0;"up"===e?o=this.upStep(r,i):"down"===e&&(o=this.downStep(r,i));var s=o>this.nzMax||o<this.nzMin;o>this.nzMax?o=this.nzMax:o<this.nzMin&&(o=this.nzMin),this.setValue(o),this.updateDisplayValue(o),this.isFocused=!0,s||(this.autoStepTimer=setTimeout((function(){n[e](t,i)}),300))}}},{key:"stop",value:function(){this.autoStepTimer&&clearTimeout(this.autoStepTimer)}},{key:"setValue",value:function(e){if("".concat(this.value)!=="".concat(e)&&this.onChange(e),this.value=e,this.parsedValue=e,this.disabledUp=this.disabledDown=!1,e||0===e){var t=Number(e);t>=this.nzMax&&(this.disabledUp=!0),t<=this.nzMin&&(this.disabledDown=!0)}}},{key:"updateDisplayValue",value:function(e){var t=Object(F.j)(this.nzFormatter(e))?this.nzFormatter(e):"";this.displayValue=t,this.inputElement.nativeElement.value="".concat(t)}},{key:"onKeyDown",value:function(e){if(e.keyCode===P.k){var t=this.getRatio(e);this.up(e,t),this.stop()}else if(e.keyCode===P.c){var n=this.getRatio(e);this.down(e,n),this.stop()}else e.keyCode===P.d&&this.updateDisplayValue(this.value)}},{key:"writeValue",value:function(e){this.value=e,this.setValue(e),this.updateDisplayValue(e),this.cdr.markForCheck()}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.nzDisabled=e,this.cdr.markForCheck()}},{key:"focus",value:function(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}},{key:"blur",value:function(){this.inputElement.nativeElement.blur()}},{key:"ngOnInit",value:function(){var e=this;this.focusMonitor.monitor(this.elementRef,!0).subscribe((function(t){t?(e.isFocused=!0,e.nzFocus.emit()):(e.isFocused=!1,e.updateDisplayValue(e.value),e.nzBlur.emit(),Promise.resolve().then((function(){return e.onTouched()})))}))}},{key:"ngOnChanges",value:function(e){if(e.nzFormatter&&!e.nzFormatter.isFirstChange()){var t=this.getCurrentValidValue(this.parsedValue);this.setValue(t),this.updateDisplayValue(t)}}},{key:"ngAfterViewInit",value:function(){this.nzAutoFocus&&this.focus()}},{key:"ngOnDestroy",value:function(){this.focusMonitor.stopMonitoring(this.elementRef)}}]),e}()).\u0275fac=function(e){return new(e||o)(S.Sb(S.l),S.Sb(S.h),S.Sb(O.b))},o.\u0275cmp=S.Mb({type:o,selectors:[["nz-input-number"]],viewQuery:function(e,t){var n;1&e&&S.Dc(X,!0),2&e&&S.xc(n=S.hc())&&(t.inputElement=n.first)},hostVars:10,hostBindings:function(e,t){2&e&&S.Ib("ant-input-number",!0)("ant-input-number-focused",t.isFocused)("ant-input-number-lg","large"===t.nzSize)("ant-input-number-sm","small"===t.nzSize)("ant-input-number-disabled",t.nzDisabled)},inputs:{nzSize:"nzSize",nzMin:"nzMin",nzMax:"nzMax",nzParser:"nzParser",nzPrecisionMode:"nzPrecisionMode",nzPlaceHolder:"nzPlaceHolder",nzStep:"nzStep",nzId:"nzId",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzFormatter:"nzFormatter",nzPrecision:"nzPrecision"},outputs:{nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzInputNumber"],features:[S.Bb([{provide:l.i,useExisting:Object(S.U)((function(){return o})),multi:!0}]),S.Ab],decls:8,vars:12,consts:[[1,"ant-input-number-handler-wrap"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-up",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","up",1,"ant-input-number-handler-up-inner"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-down",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","down",1,"ant-input-number-handler-down-inner"],[1,"ant-input-number-input-wrap"],["autocomplete","off",1,"ant-input-number-input",3,"disabled","placeholder","ngModel","keydown","keyup","ngModelChange"],["inputElement",""]],template:function(e,t){1&e&&(S.Yb(0,"div",0),S.Yb(1,"span",1),S.gc("mousedown",(function(e){return t.up(e)}))("mouseup",(function(){return t.stop()}))("mouseleave",(function(){return t.stop()})),S.Tb(2,"i",2),S.Xb(),S.Yb(3,"span",3),S.gc("mousedown",(function(e){return t.down(e)}))("mouseup",(function(){return t.stop()}))("mouseleave",(function(){return t.stop()})),S.Tb(4,"i",4),S.Xb(),S.Xb(),S.Yb(5,"div",5),S.Yb(6,"input",6,7),S.gc("keydown",(function(e){return t.onKeyDown(e)}))("keyup",(function(){return t.stop()}))("ngModelChange",(function(e){return t.onModelChange(e)})),S.Xb(),S.Xb()),2&e&&(S.Cb(1),S.Ib("ant-input-number-handler-up-disabled",t.disabledUp),S.Cb(2),S.Ib("ant-input-number-handler-down-disabled",t.disabledDown),S.Cb(3),S.qc("disabled",t.nzDisabled)("placeholder",t.nzPlaceHolder)("ngModel",t.displayValue),S.Db("id",t.nzId)("autofocus",t.nzAutoFocus?"autofocus":null)("min",t.nzMin)("max",t.nzMax)("step",t.nzStep))},directives:[v.a,l.c,l.k,l.m],encapsulation:2,changeDetection:0}),Object(C.a)([Object(F.a)(),Object(C.b)("design:type",Object)],o.prototype,"nzDisabled",void 0),Object(C.a)([Object(F.a)(),Object(C.b)("design:type",Object)],o.prototype,"nzAutoFocus",void 0),o),T=((r=function e(){_classCallCheck(this,e)}).\u0275mod=S.Qb({type:r}),r.\u0275inj=S.Pb({factory:function(e){return new(e||r)},imports:[[a.c,l.h,v.b]]}),r),w=n("dEAy"),Y=n("Wfee"),x=n("jV0o"),q=n("TzFQ"),I=n("PbXG"),L=n("Brhd"),U=((s=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"setFormValue",value:function(e){var t;this.formValue=Object.assign(Object.assign({},e),{file:null===(t=this.formValue)||void 0===t?void 0:t.file})}},{key:"addFile",value:function(e){this.formValue.file=e}},{key:"getFormValue",value:function(){return Object.assign({},this.formValue)}},{key:"setFormValidity",value:function(e){this.formValidity=e}},{key:"getFormValidity",value:function(){return this.formValidity}}]),e}()).\u0275fac=function(e){return new(e||s)},s.\u0275prov=S.Ob({token:s,factory:s.\u0275fac}),s),D=n("bOdf"),E=n("vkgz"),N=n("JIr8"),_=n("3E0/"),H=n("AytR"),A=n("Ihmt"),G=n("C2AL"),B=n("RwU8");function R(e,t){if(1&e){var n=S.Zb();S.Yb(0,"a",38),S.gc("click",(function(){return S.zc(n),S.jc().onOpenSubmit()})),S.Hc(1,"Submit"),S.Xb()}}function K(e,t){1&e&&(S.Wb(0),S.Hc(1," Please input project title! "),S.Vb())}function J(e,t){1&e&&(S.Wb(0),S.Hc(1," Project title must be less than 255 characters! "),S.Vb())}function W(e,t){if(1&e&&(S.Fc(0,K,2,0,"ng-container",39),S.Fc(1,J,2,0,"ng-container",39)),2&e){var n=t.$implicit;S.qc("ngIf",n.hasError("required")),S.Cb(1),S.qc("ngIf",n.hasError("maxlength"))}}function $(e,t){1&e&&(S.Wb(0),S.Hc(1," Please input project details! "),S.Vb())}function Q(e,t){1&e&&S.Fc(0,$,2,0,"ng-container",39),2&e&&S.qc("ngIf",t.$implicit.hasError("required"))}function Z(e,t){1&e&&(S.Wb(0),S.Hc(1," Please input your deadline! "),S.Vb())}function ee(e,t){1&e&&S.Fc(0,Z,2,0,"ng-container",39),2&e&&S.qc("ngIf",t.$implicit.hasError("required"))}function te(e,t){if(1&e&&(S.Tb(0,"nz-option",40),S.kc(1,"titlecase")),2&e){var n=t.$implicit;S.rc("nzLabel",S.lc(1,2,n)),S.qc("nzValue",n)}}function ne(e,t){1&e&&(S.Wb(0),S.Hc(1," Please input your price! "),S.Vb())}function ie(e,t){1&e&&S.Fc(0,ne,2,0,"ng-container",39),2&e&&S.qc("ngIf",t.$implicit.hasError("required"))}function re(e,t){if(1&e&&S.Tb(0,"nz-option",40),2&e){var n=t.$implicit;S.rc("nzLabel",n.username),S.qc("nzValue",n.id)}}var oe,se=((oe=function(){function e(t){_classCallCheck(this,e),this.fb=t,this.submitForm=new S.n,this.openSubmitModal=new S.n,this.initializeVariables(),this.initializeForm()}return _createClass(e,[{key:"ngOnInit",value:function(){this.reInitializeForm()}},{key:"onOpenSubmit",value:function(){this.openSubmitModal.emit()}},{key:"onSubmit",value:function(){var e=Object.assign(Object.assign({},this.form.value),{file:this.file});this.submitForm.emit(e)}},{key:"initializeForm",value:function(){this.form=this.fb.group({title:[null,[l.o.required,l.o.maxLength(255)]],details:[null,[l.o.required]],deadline:[null,[l.o.required]],price:[0,[l.o.required]],status:[null,[l.o.required]],assigneeId:[null,[l.o.required]]})}},{key:"reInitializeForm",value:function(){var e,t="ADMIN"===this.currentUser.role,n=this.selectedProject.ownerId===this.currentUser.id,i=this.selectedProject.assigneeId===this.currentUser.id;this.form=this.fb.group({title:[{value:this.selectedProject.title,disabled:!n},[l.o.required,l.o.maxLength(255)]],details:[{value:this.selectedProject.details,disabled:!n},[l.o.required]],deadline:[{value:new Date(this.selectedProject.deadline),disabled:!n},[l.o.required]],price:[{value:null!==(e=this.selectedProject.price)&&void 0!==e?e:0,disabled:!t},[l.o.required]],status:[{value:this.selectedProject.status,disabled:i},[l.o.required]],assigneeId:[{value:this.selectedProject.assigneeId,disabled:!1},[l.o.required]]})}},{key:"initializeVariables",value:function(){var e=this;this.fileList=[],this.statuses=["INITIATED","PRICED","ASSIGNED","SUBMITTED","INCORRECT","APPROVED","COMPLETED"],this.beforeUpload=function(t){return e.fileList=e.fileList.concat(t),e.file=t,!1},this.formatterCedi=function(e){return"GH\u20b5 ".concat(e)},this.parserCedi=function(e){return Number(e.replace("GH\u20b5 ",""))}}}]),e}()).\u0275fac=function(e){return new(e||oe)(S.Sb(l.d))},oe.\u0275cmp=S.Mb({type:oe,selectors:[["laze-details-card"]],inputs:{currentUser:"currentUser",selectedProject:"selectedProject",allUsers:"allUsers",isSaveLoading:"isSaveLoading"},outputs:{submitForm:"submitForm",openSubmitModal:"openSubmitModal"},decls:80,vars:25,consts:[["nz-row","","nzType","flex","nzJustify","space-around",1,"top"],["nz-col","","nzXs","24","nzSm","24","nzMd","11","nzLg","11","nzXl","11",1,"top-left"],[3,"nzSrc"],["nz-typography",""],[3,"click",4,"ngIf"],["nzType","flex","nzJustify","space-between","nz-col","","nzXs","24","nzSm","24","nzMd","11","nzLg","11","nzXl","11",1,"top-right"],["nz-icon","","nzType","rise","nzTheme","outline"],["nz-icon","","nzType","calendar","nzTheme","outline"],["nz-row","","nzType","flex","nzJustify","space-between",1,"bottom",3,"formGroup"],["nz-col","","nzXs","24","nzSm","24","nzMd","11","nzLg","11","nzXl","11",1,"left"],["nzFor","title","nz-typography","",3,"nzSpan"],["nzHasFeedback","","nzValidatingTip","Validating...",3,"nzErrorTip"],["id","title","type","text","nz-input","","nzSize","large","formControlName","title","placeholder","Project title"],["titleErrorTemplate",""],["nzFor","details","nz-typography","",3,"nzSpan"],["id","details","nz-input","","rows","4","formControlName","details","placeholder","Project details"],["detailsErrorTemplate",""],["nz-row","","nzType","flex","nzJustify","space-between"],["nz-col","","nzXs","24","nzSm","24","nzMd","11","nzLg","11","nzXl","11"],["nzFor","deadline","nz-typography","",3,"nzSpan"],["id","deadline","formControlName","deadline"],["deadlineErrorTemplate",""],["nzFor","file","nz-typography","",3,"nzSpan"],[3,"nzFileList","nzBeforeUpload","nzFileListChange"],["nz-button",""],["nz-icon","","nzType","upload"],["nz-col","","nzXs","24","nzSm","24","nzMd","11","nzLg","11","nzXl","11",1,"right"],["nzFor","status","nz-typography","",3,"nzSpan"],["id","status","formControlName","status"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFor","price","nz-typography","",3,"nzSpan"],["nzValidatingTip","Validating...",3,"nzErrorTip"],["formControlName","price","nzInputModel","decimal","nzId","price",3,"nzStep","nzFormatter","nzParser"],["priceErrorTemplate",""],["nzFor","assignee-id","nz-typography","",3,"nzSpan"],["id","assignee-id","formControlName","assigneeId"],[1,"button-container"],["nz-button","","nzType","primary","nzSize","large",3,"nzLoading","click"],[3,"click"],[4,"ngIf"],[3,"nzValue","nzLabel"]],template:function(e,t){if(1&e&&(S.Yb(0,"div",0),S.Yb(1,"div",1),S.Yb(2,"span"),S.Tb(3,"nz-avatar",2),S.Xb(),S.Yb(4,"span",3),S.Yb(5,"strong"),S.Hc(6),S.Xb(),S.Xb(),S.Yb(7,"span"),S.Fc(8,R,2,0,"a",4),S.Xb(),S.Xb(),S.Yb(9,"div",5),S.Yb(10,"span"),S.Tb(11,"i",6),S.Hc(12," Intermediate "),S.Xb(),S.Yb(13,"span"),S.Tb(14,"i",7),S.Hc(15," 5 days more "),S.Xb(),S.Xb(),S.Xb(),S.Yb(16,"form",8),S.Yb(17,"div",9),S.Yb(18,"nz-form-item"),S.Yb(19,"nz-form-label",10),S.Yb(20,"strong"),S.Hc(21,"Title"),S.Xb(),S.Xb(),S.Yb(22,"nz-form-control",11),S.Tb(23,"input",12),S.Fc(24,W,2,2,"ng-template",null,13,S.Gc),S.Xb(),S.Xb(),S.Yb(26,"nz-form-item"),S.Yb(27,"nz-form-label",14),S.Yb(28,"strong"),S.Hc(29,"Details"),S.Xb(),S.Xb(),S.Yb(30,"nz-form-control",11),S.Tb(31,"textarea",15),S.Fc(32,Q,1,1,"ng-template",null,16,S.Gc),S.Xb(),S.Xb(),S.Yb(34,"div",17),S.Yb(35,"nz-form-item",18),S.Yb(36,"nz-form-label",19),S.Yb(37,"strong"),S.Hc(38,"Deadline"),S.Xb(),S.Xb(),S.Yb(39,"nz-form-control",11),S.Tb(40,"nz-date-picker",20),S.Fc(41,ee,1,1,"ng-template",null,21,S.Gc),S.Xb(),S.Xb(),S.Yb(43,"nz-form-item",18),S.Yb(44,"nz-form-label",22),S.Yb(45,"strong"),S.Hc(46,"File"),S.Xb(),S.Xb(),S.Yb(47,"nz-form-control"),S.Yb(48,"nz-upload",23),S.gc("nzFileListChange",(function(e){return t.fileList=e})),S.Yb(49,"button",24),S.Tb(50,"i",25),S.Hc(51,"Select File "),S.Xb(),S.Xb(),S.Xb(),S.Xb(),S.Xb(),S.Xb(),S.Yb(52,"div",26),S.Yb(53,"div",17),S.Yb(54,"nz-form-item",18),S.Yb(55,"nz-form-label",27),S.Yb(56,"strong"),S.Hc(57,"Status"),S.Xb(),S.Xb(),S.Yb(58,"nz-form-control"),S.Yb(59,"nz-select",28),S.Fc(60,te,2,4,"nz-option",29),S.Xb(),S.Xb(),S.Xb(),S.Yb(61,"nz-input-group",18),S.Yb(62,"nz-form-item"),S.Yb(63,"nz-form-label",30),S.Yb(64,"strong"),S.Hc(65,"Price"),S.Xb(),S.Xb(),S.Yb(66,"nz-form-control",31),S.Tb(67,"nz-input-number",32),S.Fc(68,ie,1,1,"ng-template",null,33,S.Gc),S.Xb(),S.Xb(),S.Xb(),S.Xb(),S.Yb(70,"nz-form-item"),S.Yb(71,"nz-form-label",34),S.Yb(72,"strong"),S.Hc(73,"Assignee"),S.Xb(),S.Xb(),S.Yb(74,"nz-form-control"),S.Yb(75,"nz-select",35),S.Fc(76,re,1,2,"nz-option",29),S.Xb(),S.Xb(),S.Xb(),S.Xb(),S.Xb(),S.Yb(77,"div",36),S.Yb(78,"button",37),S.gc("click",(function(){return t.onSubmit()})),S.Hc(79," Update project "),S.Xb(),S.Xb()),2&e){var n=S.yc(25),i=S.yc(33),r=S.yc(42),o=S.yc(69);S.Cb(3),S.qc("nzSrc",(null==t.selectedProject.owner?null:t.selectedProject.owner.profileImageUrl)||"https://agentestudio.com/uploads/ckeditor/pictures/1567/content_user-profile-design-14.jpg"),S.Cb(1),S.Ec("font-size","18px"),S.Cb(2),S.Ic(t.selectedProject.owner.username),S.Cb(2),S.qc("ngIf",t.selectedProject.assigneeId===t.currentUser.id),S.Cb(8),S.qc("formGroup",t.form),S.Cb(3),S.qc("nzSpan",24),S.Cb(3),S.qc("nzErrorTip",n),S.Cb(5),S.qc("nzSpan",24),S.Cb(3),S.qc("nzErrorTip",i),S.Cb(6),S.qc("nzSpan",24),S.Cb(3),S.qc("nzErrorTip",r),S.Cb(5),S.qc("nzSpan",24),S.Cb(4),S.qc("nzFileList",t.fileList)("nzBeforeUpload",t.beforeUpload),S.Cb(7),S.qc("nzSpan",24),S.Cb(5),S.qc("ngForOf",t.statuses),S.Cb(3),S.qc("nzSpan",24),S.Cb(3),S.qc("nzErrorTip",o),S.Cb(1),S.qc("nzStep",.1)("nzFormatter",t.formatterCedi)("nzParser",t.parserCedi),S.Cb(4),S.qc("nzSpan",24),S.Cb(5),S.qc("ngForOf",t.allUsers),S.Cb(2),S.qc("nzLoading",t.isSaveLoading)}},directives:[b.c,b.a,m.a,a.m,G.a,v.a,l.p,l.l,l.g,d.c,d.d,d.a,h.a,l.c,l.k,l.f,p.a,f.a,z.a,B.a,M.b,a.l,h.b,V,M.a],pipes:[a.v],styles:["[_nghost-%COMP%]{display:block;background-color:#fff;padding:12px 36px;border-radius:12px;box-shadow:0 3px 18px -3px #dedede}.top[_ngcontent-%COMP%]{margin:12px 0 42px}.top-left[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding-right:12px}.top-right[_ngcontent-%COMP%]{text-align:end}.top-right[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{padding-right:24px}.top-right[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:#337357}.top-right[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.button-container[_ngcontent-%COMP%]{text-align:center}"]}),oe);function ae(e,t){1&e&&(S.Wb(0),S.Hc(1," Please input project submit text! "),S.Vb())}function ce(e,t){1&e&&S.Fc(0,ae,2,0,"ng-container",9),2&e&&S.qc("ngIf",t.$implicit.hasError("required"))}var le,ue=((le=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.fb=t,this.submitProjectFormService=n,this.beforeUpload=function(e){return i.fileList=i.fileList.concat(e),i.submitProjectFormService.addFile(e),!1},this.fileList=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.initializeForm(),this.setupFormListener()}},{key:"ngOnDestroy",value:function(){this.valueChangesSubscription&&this.valueChangesSubscription.unsubscribe()}},{key:"initializeForm",value:function(){this.form=this.fb.group({submitText:[null,[l.o.required]]},{updateOn:"blur"})}},{key:"setupFormListener",value:function(){var e=this;this.valueChangesSubscription=this.form.valueChanges.pipe(Object(E.a)((function(t){e.submitProjectFormService.setFormValue(t),e.submitProjectFormService.setFormValidity(e.form.valid)}))).subscribe()}}]),e}()).\u0275fac=function(e){return new(e||le)(S.Sb(l.d),S.Sb(U))},le.\u0275cmp=S.Mb({type:le,selectors:[["laze-submit-project-form"]],decls:18,vars:6,consts:[["nz-form","",3,"formGroup"],["nzFor","submit-text","nz-typography","",3,"nzSpan"],["nzHasFeedback","","nzValidatingTip","Validating...",3,"nzErrorTip"],["id","submit-text","nz-input","","rows","4","formControlName","submitText","placeholder","Project Submit text"],["submitTextErrorTemplate",""],["nzFor","file","nz-typography","",3,"nzSpan"],[3,"nzFileList","nzBeforeUpload","nzFileListChange"],["nz-button",""],["nz-icon","","nzType","upload"],[4,"ngIf"]],template:function(e,t){if(1&e&&(S.Yb(0,"form",0),S.Yb(1,"nz-form-item"),S.Yb(2,"nz-form-label",1),S.Yb(3,"strong"),S.Hc(4,"Submit Text"),S.Xb(),S.Xb(),S.Yb(5,"nz-form-control",2),S.Tb(6,"textarea",3),S.Fc(7,ce,1,1,"ng-template",null,4,S.Gc),S.Xb(),S.Xb(),S.Yb(9,"nz-form-item"),S.Yb(10,"nz-form-label",5),S.Yb(11,"strong"),S.Hc(12,"Submit file"),S.Xb(),S.Xb(),S.Yb(13,"nz-form-control"),S.Yb(14,"nz-upload",6),S.gc("nzFileListChange",(function(e){return t.fileList=e})),S.Yb(15,"button",7),S.Tb(16,"i",8),S.Hc(17,"Select File"),S.Xb(),S.Xb(),S.Xb(),S.Xb(),S.Xb()),2&e){var n=S.yc(8);S.qc("formGroup",t.form),S.Cb(2),S.qc("nzSpan",24),S.Cb(3),S.qc("nzErrorTip",n),S.Cb(5),S.qc("nzSpan",24),S.Cb(4),S.qc("nzFileList",t.fileList)("nzBeforeUpload",t.beforeUpload)}},directives:[l.p,l.l,d.b,l.g,b.c,d.c,b.a,d.d,d.a,h.a,l.c,l.k,l.f,f.a,z.a,B.a,G.a,v.a,a.m],styles:[""]}),le);function be(e,t){if(1&e&&S.Tb(0,"nz-alert",5),2&e){var n=S.jc();S.qc("nzDescription",n.errorMessage)}}function de(e,t){1&e&&S.Tb(0,"laze-submit-project-form")}var pe,fe,he=((fe=function(){function e(t,n,i,r,o){_classCallCheck(this,e),this.route=t,this.message=n,this.filestackService=i,this.projectService=r,this.submitProjectFormService=o}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentUser=this.route.snapshot.data.currentUser,this.selectedProject=this.route.snapshot.data.selectedProject,this.allUsers=this.route.snapshot.data.allUsers,this.filestackService.init(H.a.filestackApiKey)}},{key:"onSubmit",value:function(e){var t=this;this.isSaveLoading=!0;var n=Object.assign(Object.assign({},e),{id:this.currentUser.id}),i=this.projectService.update(n);n.file&&(i=this.filestackService.upload(n.file).pipe(Object(D.a)((function(e){return n.fileUrl=e.url,n.file=null,console.log({updateData:n}),t.projectService.update(n)})))),i.pipe(Object(E.a)((function(e){var i,r,o,s,a,c,l;t.selectedProject=Object.assign(Object.assign({},t.selectedProject),{title:null!==(i=n.title)&&void 0!==i?i:t.selectedProject.title,details:null!==(r=n.details)&&void 0!==r?r:t.selectedProject.details,deadline:null!==(o=n.deadline)&&void 0!==o?o:t.selectedProject.deadline,price:null!==(s=n.price)&&void 0!==s?s:t.selectedProject.price,status:null!==(a=n.status)&&void 0!==a?a:t.selectedProject.status,assigneeId:null!==(c=n.assigneeId)&&void 0!==c?c:t.selectedProject.assigneeId,fileUrl:null!==(l=n.fileUrl)&&void 0!==l?l:t.selectedProject.fileUrl}),t.isSaveLoading=!1,t.message.success("Project has been updated!")})),Object(N.a)((function(e){return t.isSaveLoading=!1,t.message.error(e.message),e}))).subscribe()}},{key:"onOpenModal",value:function(){this.isModalVisible=!0}},{key:"onSubmitProject",value:function(){var e=this;if(this.errorMessage=null,this.submitProjectFormService.getFormValidity()){this.isModalSaveLoading=!0;var t=Object.assign(Object.assign({},this.submitProjectFormService.getFormValue()),{status:"SUBMITTED"}),n=this.projectService.submit(t);this.submitProjectFormService.getFormValue().file&&(n=this.filestackService.upload(this.submitProjectFormService.getFormValue().file).pipe(Object(D.a)((function(n){return t.fileUrl=n.url,e.projectService.submit(t)})))),n.pipe(Object(E.a)((function(t){console.log({project:t}),e.isModalSaveLoading=!1})),Object(_.a)(500),Object(E.a)((function(t){return e.onCancel()})),Object(N.a)((function(t){return e.errorMessage=t.message,e.isModalSaveLoading=!1,t}))).subscribe()}}},{key:"onCancel",value:function(){this.isModalVisible=!1}}]),e}()).\u0275fac=function(e){return new(e||fe)(S.Sb(c.a),S.Sb(g.b),S.Sb(x.b),S.Sb(A.a),S.Sb(U))},fe.\u0275cmp=S.Mb({type:fe,selectors:[["ng-component"]],decls:5,vars:8,consts:[["nzTitle","Project","nzSubtitle","Details of project",1,"site-page-header"],[3,"currentUser","selectedProject","allUsers","isSaveLoading","submitForm","openSubmitModal"],["nzTitle","Submit project",3,"nzVisible","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],["class","auth-form-margin","nzType","error","nzCloseable","","nzMessage","Project submission error",3,"nzDescription",4,"ngIf"],[4,"ngIf"],["nzType","error","nzCloseable","","nzMessage","Project submission error",1,"auth-form-margin",3,"nzDescription"]],template:function(e,t){1&e&&(S.Tb(0,"nz-page-header",0),S.Yb(1,"laze-details-card",1),S.gc("submitForm",(function(e){return t.onSubmit(e)}))("openSubmitModal",(function(){return t.onOpenModal()})),S.Xb(),S.Yb(2,"nz-modal",2),S.gc("nzVisibleChange",(function(e){return t.isModalVisible=e}))("nzOnCancel",(function(){return t.onCancel()}))("nzOnOk",(function(){return t.onSubmitProject()})),S.Fc(3,be,1,1,"nz-alert",3),S.Fc(4,de,1,0,"laze-submit-project-form",4),S.Xb()),2&e&&(S.Cb(1),S.qc("currentUser",t.currentUser)("selectedProject",t.selectedProject)("allUsers",t.allUsers)("isSaveLoading",t.isSaveLoading),S.Cb(1),S.qc("nzVisible",t.isModalVisible)("nzOkLoading",t.isModalSaveLoading),S.Cb(1),S.qc("ngIf",t.errorMessage),S.Cb(1),S.qc("ngIf",t.isModalVisible))},directives:[u.a,se,w.a,a.m,Y.a,ue],styles:["nz-page-header[_ngcontent-%COMP%]{margin-bottom:24px}"]}),fe),ze=((pe=function e(){_classCallCheck(this,e)}).\u0275mod=S.Qb({type:pe}),pe.\u0275inj=S.Pb({factory:function(e){return new(e||pe)},providers:[U],imports:[[a.c,l.h,l.n,c.i.forChild([{path:":id",component:he,resolve:{currentUser:q.a,selectedProject:I.a,allUsers:L.a}}]),u.b,b.b,d.e,p.b,f.b,h.d,z.c,m.b,g.a,v.b,j,M.c,k.b,T,x.a,w.b,Y.b]]}),pe)}}]);