(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{ZnwX:function(e,t,n){"use strict";n.r(t),n.d(t,"ProjectModule",(function(){return le}));var i=n("ofXK"),s=n("tyNb"),r=n("3Pt+"),o=n("jPNr"),a=n("B+r4"),l=n("ocnv"),c=n("0lU3"),u=n("D9mS"),b=n("PTRe"),d=n("OzZK"),p=n("ZE2D"),h=n("PScX"),z=n("FwiY"),m=n("rDax"),f=n("fXoL"),g=(n("XNiG"),n("VRyK"),n("xgIS"),n("mrSG")),S=n("FtGj"),P=(n("+rOU"),n("JgHy"),n("/KA4"));let F=(()=>{class e{}return e.\u0275mod=f.Qb({type:e}),e.\u0275inj=f.Pb({factory:function(t){return new(t||e)},imports:[[i.c,r.h,m.f,z.b]]}),e})();var j=n("zAKX"),v=n("Nqz0"),y=n("u47x");const C=["inputElement"];let M=(()=>{class e{constructor(e,t,n){this.elementRef=e,this.cdr=t,this.focusMonitor=n,this.isFocused=!1,this.disabledUp=!1,this.disabledDown=!1,this.onChange=()=>{},this.onTouched=()=>{},this.nzBlur=new f.n,this.nzFocus=new f.n,this.nzSize="default",this.nzMin=-1/0,this.nzMax=1/0,this.nzParser=e=>e.trim().replace(/\u3002/g,".").replace(/[^\w\.-]+/g,""),this.nzPrecisionMode="toFixed",this.nzPlaceHolder="",this.nzStep=1,this.nzId=null,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzFormatter=e=>e}onModelChange(e){this.parsedValue=this.nzParser(e),this.inputElement.nativeElement.value=`${this.parsedValue}`;const t=this.getCurrentValidValue(this.parsedValue);this.setValue(t)}getCurrentValidValue(e){let t=e;return t=""===t?"":this.isNotCompleteNumber(t)?this.value:`${this.getValidValue(t)}`,this.toNumber(t)}isNotCompleteNumber(e){return isNaN(e)||""===e||null===e||!(!e||e.toString().indexOf(".")!==e.toString().length-1)}getValidValue(e){let t=parseFloat(e);return isNaN(t)?e:(t<this.nzMin&&(t=this.nzMin),t>this.nzMax&&(t=this.nzMax),t)}toNumber(e){if(this.isNotCompleteNumber(e))return e;const t=String(e);if(t.indexOf(".")>=0&&Object(P.j)(this.nzPrecision)){if("function"==typeof this.nzPrecisionMode)return this.nzPrecisionMode(e,this.nzPrecision);if("cut"===this.nzPrecisionMode){const e=t.split(".");return e[1]=e[1].slice(0,this.nzPrecision),Number(e.join("."))}return Number(Number(e).toFixed(this.nzPrecision))}return Number(e)}getRatio(e){let t=1;return e.metaKey||e.ctrlKey?t=.1:e.shiftKey&&(t=10),t}down(e,t){this.isFocused||this.focus(),this.step("down",e,t)}up(e,t){this.isFocused||this.focus(),this.step("up",e,t)}getPrecision(e){const t=e.toString();if(t.indexOf("e-")>=0)return parseInt(t.slice(t.indexOf("e-")+2),10);let n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}getMaxPrecision(e,t){if(Object(P.j)(this.nzPrecision))return this.nzPrecision;const n=this.getPrecision(t),i=this.getPrecision(this.nzStep),s=this.getPrecision(e);return e?Math.max(s,n+i):n+i}getPrecisionFactor(e,t){const n=this.getMaxPrecision(e,t);return Math.pow(10,n)}upStep(e,t){const n=this.getPrecisionFactor(e,t),i=Math.abs(this.getMaxPrecision(e,t));let s;return s="number"==typeof e?((n*e+n*this.nzStep*t)/n).toFixed(i):this.nzMin===-1/0?this.nzStep:this.nzMin,this.toNumber(s)}downStep(e,t){const n=this.getPrecisionFactor(e,t),i=Math.abs(this.getMaxPrecision(e,t));let s;return s="number"==typeof e?((n*e-n*this.nzStep*t)/n).toFixed(i):this.nzMin===-1/0?-this.nzStep:this.nzMin,this.toNumber(s)}step(e,t,n=1){if(this.stop(),t.preventDefault(),this.nzDisabled)return;const i=this.getCurrentValidValue(this.parsedValue)||0;let s=0;"up"===e?s=this.upStep(i,n):"down"===e&&(s=this.downStep(i,n));const r=s>this.nzMax||s<this.nzMin;s>this.nzMax?s=this.nzMax:s<this.nzMin&&(s=this.nzMin),this.setValue(s),this.updateDisplayValue(s),this.isFocused=!0,r||(this.autoStepTimer=setTimeout(()=>{this[e](t,n)},300))}stop(){this.autoStepTimer&&clearTimeout(this.autoStepTimer)}setValue(e){if(`${this.value}`!==`${e}`&&this.onChange(e),this.value=e,this.parsedValue=e,this.disabledUp=this.disabledDown=!1,e||0===e){const t=Number(e);t>=this.nzMax&&(this.disabledUp=!0),t<=this.nzMin&&(this.disabledDown=!0)}}updateDisplayValue(e){const t=Object(P.j)(this.nzFormatter(e))?this.nzFormatter(e):"";this.displayValue=t,this.inputElement.nativeElement.value=`${t}`}onKeyDown(e){if(e.keyCode===S.k){const t=this.getRatio(e);this.up(e,t),this.stop()}else if(e.keyCode===S.c){const t=this.getRatio(e);this.down(e,t),this.stop()}else e.keyCode===S.d&&this.updateDisplayValue(this.value)}writeValue(e){this.value=e,this.setValue(e),this.updateDisplayValue(e),this.cdr.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.nzDisabled=e,this.cdr.markForCheck()}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}ngOnInit(){this.focusMonitor.monitor(this.elementRef,!0).subscribe(e=>{e?(this.isFocused=!0,this.nzFocus.emit()):(this.isFocused=!1,this.updateDisplayValue(this.value),this.nzBlur.emit(),Promise.resolve().then(()=>this.onTouched()))})}ngOnChanges(e){if(e.nzFormatter&&!e.nzFormatter.isFirstChange()){const e=this.getCurrentValidValue(this.parsedValue);this.setValue(e),this.updateDisplayValue(e)}}ngAfterViewInit(){this.nzAutoFocus&&this.focus()}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef)}}return e.\u0275fac=function(t){return new(t||e)(f.Sb(f.l),f.Sb(f.h),f.Sb(y.b))},e.\u0275cmp=f.Mb({type:e,selectors:[["nz-input-number"]],viewQuery:function(e,t){var n;1&e&&f.Dc(C,!0),2&e&&f.xc(n=f.hc())&&(t.inputElement=n.first)},hostVars:10,hostBindings:function(e,t){2&e&&f.Ib("ant-input-number",!0)("ant-input-number-focused",t.isFocused)("ant-input-number-lg","large"===t.nzSize)("ant-input-number-sm","small"===t.nzSize)("ant-input-number-disabled",t.nzDisabled)},inputs:{nzSize:"nzSize",nzMin:"nzMin",nzMax:"nzMax",nzParser:"nzParser",nzPrecisionMode:"nzPrecisionMode",nzPlaceHolder:"nzPlaceHolder",nzStep:"nzStep",nzId:"nzId",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzFormatter:"nzFormatter",nzPrecision:"nzPrecision"},outputs:{nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzInputNumber"],features:[f.Bb([{provide:r.i,useExisting:Object(f.U)(()=>e),multi:!0}]),f.Ab],decls:8,vars:12,consts:[[1,"ant-input-number-handler-wrap"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-up",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","up",1,"ant-input-number-handler-up-inner"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-down",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","down",1,"ant-input-number-handler-down-inner"],[1,"ant-input-number-input-wrap"],["autocomplete","off",1,"ant-input-number-input",3,"disabled","placeholder","ngModel","keydown","keyup","ngModelChange"],["inputElement",""]],template:function(e,t){1&e&&(f.Yb(0,"div",0),f.Yb(1,"span",1),f.gc("mousedown",(function(e){return t.up(e)}))("mouseup",(function(){return t.stop()}))("mouseleave",(function(){return t.stop()})),f.Tb(2,"i",2),f.Xb(),f.Yb(3,"span",3),f.gc("mousedown",(function(e){return t.down(e)}))("mouseup",(function(){return t.stop()}))("mouseleave",(function(){return t.stop()})),f.Tb(4,"i",4),f.Xb(),f.Xb(),f.Yb(5,"div",5),f.Yb(6,"input",6,7),f.gc("keydown",(function(e){return t.onKeyDown(e)}))("keyup",(function(){return t.stop()}))("ngModelChange",(function(e){return t.onModelChange(e)})),f.Xb(),f.Xb()),2&e&&(f.Cb(1),f.Ib("ant-input-number-handler-up-disabled",t.disabledUp),f.Cb(2),f.Ib("ant-input-number-handler-down-disabled",t.disabledDown),f.Cb(3),f.qc("disabled",t.nzDisabled)("placeholder",t.nzPlaceHolder)("ngModel",t.displayValue),f.Db("id",t.nzId)("autofocus",t.nzAutoFocus?"autofocus":null)("min",t.nzMin)("max",t.nzMax)("step",t.nzStep))},directives:[z.a,r.c,r.k,r.m],encapsulation:2,changeDetection:0}),Object(g.a)([Object(P.a)(),Object(g.b)("design:type",Object)],e.prototype,"nzDisabled",void 0),Object(g.a)([Object(P.a)(),Object(g.b)("design:type",Object)],e.prototype,"nzAutoFocus",void 0),e})(),X=(()=>{class e{}return e.\u0275mod=f.Qb({type:e}),e.\u0275inj=f.Pb({factory:function(t){return new(t||e)},imports:[[i.c,r.h,z.b]]}),e})();var O=n("dEAy"),V=n("Wfee"),T=n("jV0o"),Y=n("TzFQ"),w=n("PbXG"),x=n("Brhd");let q=(()=>{class e{setFormValue(e){var t;this.formValue=Object.assign(Object.assign({},e),{file:null===(t=this.formValue)||void 0===t?void 0:t.file})}addFile(e){this.formValue.file=e}getFormValue(){return Object.assign({},this.formValue)}setFormValidity(e){this.formValidity=e}getFormValidity(){return this.formValidity}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=f.Ob({token:e,factory:e.\u0275fac}),e})();var I=n("bOdf"),L=n("vkgz"),D=n("JIr8"),U=n("3E0/"),E=n("AytR"),k=n("Ihmt"),N=n("C2AL"),H=n("RwU8");function A(e,t){if(1&e){const e=f.Zb();f.Yb(0,"a",38),f.gc("click",(function(){return f.zc(e),f.jc().onOpenSubmit()})),f.Hc(1,"Submit"),f.Xb()}}function G(e,t){1&e&&(f.Wb(0),f.Hc(1," Please input project title! "),f.Vb())}function _(e,t){1&e&&(f.Wb(0),f.Hc(1," Project title must be less than 255 characters! "),f.Vb())}function B(e,t){if(1&e&&(f.Fc(0,G,2,0,"ng-container",39),f.Fc(1,_,2,0,"ng-container",39)),2&e){const e=t.$implicit;f.qc("ngIf",e.hasError("required")),f.Cb(1),f.qc("ngIf",e.hasError("maxlength"))}}function R(e,t){1&e&&(f.Wb(0),f.Hc(1," Please input project details! "),f.Vb())}function $(e,t){1&e&&f.Fc(0,R,2,0,"ng-container",39),2&e&&f.qc("ngIf",t.$implicit.hasError("required"))}function K(e,t){1&e&&(f.Wb(0),f.Hc(1," Please input your deadline! "),f.Vb())}function J(e,t){1&e&&f.Fc(0,K,2,0,"ng-container",39),2&e&&f.qc("ngIf",t.$implicit.hasError("required"))}function W(e,t){if(1&e&&(f.Tb(0,"nz-option",40),f.kc(1,"titlecase")),2&e){const e=t.$implicit;f.rc("nzLabel",f.lc(1,2,e)),f.qc("nzValue",e)}}function Q(e,t){1&e&&(f.Wb(0),f.Hc(1," Please input your price! "),f.Vb())}function Z(e,t){1&e&&f.Fc(0,Q,2,0,"ng-container",39),2&e&&f.qc("ngIf",t.$implicit.hasError("required"))}function ee(e,t){if(1&e&&f.Tb(0,"nz-option",40),2&e){const e=t.$implicit;f.rc("nzLabel",e.username),f.qc("nzValue",e.id)}}let te=(()=>{class e{constructor(e){this.fb=e,this.submitForm=new f.n,this.openSubmitModal=new f.n,this.initializeVariables(),this.initializeForm()}ngOnInit(){this.reInitializeForm()}onOpenSubmit(){this.openSubmitModal.emit()}onSubmit(){const e=Object.assign(Object.assign({},this.form.value),{file:this.file});this.submitForm.emit(e)}initializeForm(){this.form=this.fb.group({title:[null,[r.o.required,r.o.maxLength(255)]],details:[null,[r.o.required]],deadline:[null,[r.o.required]],price:[0,[r.o.required]],status:[null,[r.o.required]],assigneeId:[null,[r.o.required]]})}reInitializeForm(){var e;const t="ADMIN"===this.currentUser.role,n=this.selectedProject.ownerId===this.currentUser.id,i=this.selectedProject.assigneeId===this.currentUser.id;this.form=this.fb.group({title:[{value:this.selectedProject.title,disabled:!n},[r.o.required,r.o.maxLength(255)]],details:[{value:this.selectedProject.details,disabled:!n},[r.o.required]],deadline:[{value:new Date(this.selectedProject.deadline),disabled:!n},[r.o.required]],price:[{value:null!==(e=this.selectedProject.price)&&void 0!==e?e:0,disabled:!t},[r.o.required]],status:[{value:this.selectedProject.status,disabled:i},[r.o.required]],assigneeId:[{value:this.selectedProject.assigneeId,disabled:!1},[r.o.required]]})}initializeVariables(){this.fileList=[],this.statuses=["INITIATED","PRICED","ASSIGNED","SUBMITTED","INCORRECT","APPROVED","COMPLETED"],this.beforeUpload=e=>(this.fileList=this.fileList.concat(e),this.file=e,!1),this.formatterCedi=e=>`GH\u20b5 ${e}`,this.parserCedi=e=>Number(e.replace("GH\u20b5 ",""))}}return e.\u0275fac=function(t){return new(t||e)(f.Sb(r.d))},e.\u0275cmp=f.Mb({type:e,selectors:[["laze-details-card"]],inputs:{currentUser:"currentUser",selectedProject:"selectedProject",allUsers:"allUsers",isSaveLoading:"isSaveLoading"},outputs:{submitForm:"submitForm",openSubmitModal:"openSubmitModal"},decls:80,vars:25,consts:[["nz-row","","nzType","flex","nzJustify","space-around",1,"top"],["nz-col","","nzXs","24","nzSm","24","nzMd","11","nzLg","11","nzXl","11",1,"top-left"],[3,"nzSrc"],["nz-typography",""],[3,"click",4,"ngIf"],["nzType","flex","nzJustify","space-between","nz-col","","nzXs","24","nzSm","24","nzMd","11","nzLg","11","nzXl","11",1,"top-right"],["nz-icon","","nzType","rise","nzTheme","outline"],["nz-icon","","nzType","calendar","nzTheme","outline"],["nz-row","","nzType","flex","nzJustify","space-between",1,"bottom",3,"formGroup"],["nz-col","","nzXs","24","nzSm","24","nzMd","11","nzLg","11","nzXl","11",1,"left"],["nzFor","title","nz-typography","",3,"nzSpan"],["nzHasFeedback","","nzValidatingTip","Validating...",3,"nzErrorTip"],["id","title","type","text","nz-input","","nzSize","large","formControlName","title","placeholder","Project title"],["titleErrorTemplate",""],["nzFor","details","nz-typography","",3,"nzSpan"],["id","details","nz-input","","rows","4","formControlName","details","placeholder","Project details"],["detailsErrorTemplate",""],["nz-row","","nzType","flex","nzJustify","space-between"],["nz-col","","nzXs","24","nzSm","24","nzMd","11","nzLg","11","nzXl","11"],["nzFor","deadline","nz-typography","",3,"nzSpan"],["id","deadline","formControlName","deadline"],["deadlineErrorTemplate",""],["nzFor","file","nz-typography","",3,"nzSpan"],[3,"nzFileList","nzBeforeUpload","nzFileListChange"],["nz-button",""],["nz-icon","","nzType","upload"],["nz-col","","nzXs","24","nzSm","24","nzMd","11","nzLg","11","nzXl","11",1,"right"],["nzFor","status","nz-typography","",3,"nzSpan"],["id","status","formControlName","status"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFor","price","nz-typography","",3,"nzSpan"],["nzValidatingTip","Validating...",3,"nzErrorTip"],["formControlName","price","nzInputModel","decimal","nzId","price",3,"nzStep","nzFormatter","nzParser"],["priceErrorTemplate",""],["nzFor","assignee-id","nz-typography","",3,"nzSpan"],["id","assignee-id","formControlName","assigneeId"],[1,"button-container"],["nz-button","","nzType","primary","nzSize","large",3,"nzLoading","click"],[3,"click"],[4,"ngIf"],[3,"nzValue","nzLabel"]],template:function(e,t){if(1&e&&(f.Yb(0,"div",0),f.Yb(1,"div",1),f.Yb(2,"span"),f.Tb(3,"nz-avatar",2),f.Xb(),f.Yb(4,"span",3),f.Yb(5,"strong"),f.Hc(6),f.Xb(),f.Xb(),f.Yb(7,"span"),f.Fc(8,A,2,0,"a",4),f.Xb(),f.Xb(),f.Yb(9,"div",5),f.Yb(10,"span"),f.Tb(11,"i",6),f.Hc(12," Intermediate "),f.Xb(),f.Yb(13,"span"),f.Tb(14,"i",7),f.Hc(15," 5 days more "),f.Xb(),f.Xb(),f.Xb(),f.Yb(16,"form",8),f.Yb(17,"div",9),f.Yb(18,"nz-form-item"),f.Yb(19,"nz-form-label",10),f.Yb(20,"strong"),f.Hc(21,"Title"),f.Xb(),f.Xb(),f.Yb(22,"nz-form-control",11),f.Tb(23,"input",12),f.Fc(24,B,2,2,"ng-template",null,13,f.Gc),f.Xb(),f.Xb(),f.Yb(26,"nz-form-item"),f.Yb(27,"nz-form-label",14),f.Yb(28,"strong"),f.Hc(29,"Details"),f.Xb(),f.Xb(),f.Yb(30,"nz-form-control",11),f.Tb(31,"textarea",15),f.Fc(32,$,1,1,"ng-template",null,16,f.Gc),f.Xb(),f.Xb(),f.Yb(34,"div",17),f.Yb(35,"nz-form-item",18),f.Yb(36,"nz-form-label",19),f.Yb(37,"strong"),f.Hc(38,"Deadline"),f.Xb(),f.Xb(),f.Yb(39,"nz-form-control",11),f.Tb(40,"nz-date-picker",20),f.Fc(41,J,1,1,"ng-template",null,21,f.Gc),f.Xb(),f.Xb(),f.Yb(43,"nz-form-item",18),f.Yb(44,"nz-form-label",22),f.Yb(45,"strong"),f.Hc(46,"File"),f.Xb(),f.Xb(),f.Yb(47,"nz-form-control"),f.Yb(48,"nz-upload",23),f.gc("nzFileListChange",(function(e){return t.fileList=e})),f.Yb(49,"button",24),f.Tb(50,"i",25),f.Hc(51,"Select File "),f.Xb(),f.Xb(),f.Xb(),f.Xb(),f.Xb(),f.Xb(),f.Yb(52,"div",26),f.Yb(53,"div",17),f.Yb(54,"nz-form-item",18),f.Yb(55,"nz-form-label",27),f.Yb(56,"strong"),f.Hc(57,"Status"),f.Xb(),f.Xb(),f.Yb(58,"nz-form-control"),f.Yb(59,"nz-select",28),f.Fc(60,W,2,4,"nz-option",29),f.Xb(),f.Xb(),f.Xb(),f.Yb(61,"nz-input-group",18),f.Yb(62,"nz-form-item"),f.Yb(63,"nz-form-label",30),f.Yb(64,"strong"),f.Hc(65,"Price"),f.Xb(),f.Xb(),f.Yb(66,"nz-form-control",31),f.Tb(67,"nz-input-number",32),f.Fc(68,Z,1,1,"ng-template",null,33,f.Gc),f.Xb(),f.Xb(),f.Xb(),f.Xb(),f.Yb(70,"nz-form-item"),f.Yb(71,"nz-form-label",34),f.Yb(72,"strong"),f.Hc(73,"Assignee"),f.Xb(),f.Xb(),f.Yb(74,"nz-form-control"),f.Yb(75,"nz-select",35),f.Fc(76,ee,1,2,"nz-option",29),f.Xb(),f.Xb(),f.Xb(),f.Xb(),f.Xb(),f.Yb(77,"div",36),f.Yb(78,"button",37),f.gc("click",(function(){return t.onSubmit()})),f.Hc(79," Update project "),f.Xb(),f.Xb()),2&e){const e=f.yc(25),n=f.yc(33),i=f.yc(42),s=f.yc(69);f.Cb(3),f.qc("nzSrc",(null==t.selectedProject.owner?null:t.selectedProject.owner.profileImageUrl)||"https://agentestudio.com/uploads/ckeditor/pictures/1567/content_user-profile-design-14.jpg"),f.Cb(1),f.Ec("font-size","18px"),f.Cb(2),f.Ic(t.selectedProject.owner.username),f.Cb(2),f.qc("ngIf",t.selectedProject.assigneeId===t.currentUser.id),f.Cb(8),f.qc("formGroup",t.form),f.Cb(3),f.qc("nzSpan",24),f.Cb(3),f.qc("nzErrorTip",e),f.Cb(5),f.qc("nzSpan",24),f.Cb(3),f.qc("nzErrorTip",n),f.Cb(6),f.qc("nzSpan",24),f.Cb(3),f.qc("nzErrorTip",i),f.Cb(5),f.qc("nzSpan",24),f.Cb(4),f.qc("nzFileList",t.fileList)("nzBeforeUpload",t.beforeUpload),f.Cb(7),f.qc("nzSpan",24),f.Cb(5),f.qc("ngForOf",t.statuses),f.Cb(3),f.qc("nzSpan",24),f.Cb(3),f.qc("nzErrorTip",s),f.Cb(1),f.qc("nzStep",.1)("nzFormatter",t.formatterCedi)("nzParser",t.parserCedi),f.Cb(4),f.qc("nzSpan",24),f.Cb(5),f.qc("ngForOf",t.allUsers),f.Cb(2),f.qc("nzLoading",t.isSaveLoading)}},directives:[a.c,a.a,p.a,i.m,N.a,z.a,r.p,r.l,r.g,l.c,l.d,l.a,b.a,r.c,r.k,r.f,c.a,u.a,d.a,H.a,j.b,i.l,b.b,M,j.a],pipes:[i.v],styles:["[_nghost-%COMP%]{display:block;background-color:#fff;padding:12px 36px;border-radius:12px;box-shadow:0 3px 18px -3px #dedede}.top[_ngcontent-%COMP%]{margin:12px 0 42px}.top-left[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding-right:12px}.top-right[_ngcontent-%COMP%]{text-align:end}.top-right[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{padding-right:24px}.top-right[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:#337357}.top-right[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.button-container[_ngcontent-%COMP%]{text-align:center}"]}),e})();function ne(e,t){1&e&&(f.Wb(0),f.Hc(1," Please input project submit text! "),f.Vb())}function ie(e,t){1&e&&f.Fc(0,ne,2,0,"ng-container",9),2&e&&f.qc("ngIf",t.$implicit.hasError("required"))}let se=(()=>{class e{constructor(e,t){this.fb=e,this.submitProjectFormService=t,this.beforeUpload=e=>(this.fileList=this.fileList.concat(e),this.submitProjectFormService.addFile(e),!1),this.fileList=[]}ngOnInit(){this.initializeForm(),this.setupFormListener()}ngOnDestroy(){this.valueChangesSubscription&&this.valueChangesSubscription.unsubscribe()}initializeForm(){this.form=this.fb.group({submitText:[null,[r.o.required]]},{updateOn:"blur"})}setupFormListener(){this.valueChangesSubscription=this.form.valueChanges.pipe(Object(L.a)(e=>{this.submitProjectFormService.setFormValue(e),this.submitProjectFormService.setFormValidity(this.form.valid)})).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(f.Sb(r.d),f.Sb(q))},e.\u0275cmp=f.Mb({type:e,selectors:[["laze-submit-project-form"]],decls:18,vars:6,consts:[["nz-form","",3,"formGroup"],["nzFor","submit-text","nz-typography","",3,"nzSpan"],["nzHasFeedback","","nzValidatingTip","Validating...",3,"nzErrorTip"],["id","submit-text","nz-input","","rows","4","formControlName","submitText","placeholder","Project Submit text"],["submitTextErrorTemplate",""],["nzFor","file","nz-typography","",3,"nzSpan"],[3,"nzFileList","nzBeforeUpload","nzFileListChange"],["nz-button",""],["nz-icon","","nzType","upload"],[4,"ngIf"]],template:function(e,t){if(1&e&&(f.Yb(0,"form",0),f.Yb(1,"nz-form-item"),f.Yb(2,"nz-form-label",1),f.Yb(3,"strong"),f.Hc(4,"Submit Text"),f.Xb(),f.Xb(),f.Yb(5,"nz-form-control",2),f.Tb(6,"textarea",3),f.Fc(7,ie,1,1,"ng-template",null,4,f.Gc),f.Xb(),f.Xb(),f.Yb(9,"nz-form-item"),f.Yb(10,"nz-form-label",5),f.Yb(11,"strong"),f.Hc(12,"Submit file"),f.Xb(),f.Xb(),f.Yb(13,"nz-form-control"),f.Yb(14,"nz-upload",6),f.gc("nzFileListChange",(function(e){return t.fileList=e})),f.Yb(15,"button",7),f.Tb(16,"i",8),f.Hc(17,"Select File"),f.Xb(),f.Xb(),f.Xb(),f.Xb(),f.Xb()),2&e){const e=f.yc(8);f.qc("formGroup",t.form),f.Cb(2),f.qc("nzSpan",24),f.Cb(3),f.qc("nzErrorTip",e),f.Cb(5),f.qc("nzSpan",24),f.Cb(4),f.qc("nzFileList",t.fileList)("nzBeforeUpload",t.beforeUpload)}},directives:[r.p,r.l,l.b,r.g,a.c,l.c,a.a,l.d,l.a,b.a,r.c,r.k,r.f,u.a,d.a,H.a,N.a,z.a,i.m],styles:[""]}),e})();function re(e,t){if(1&e&&f.Tb(0,"nz-alert",5),2&e){const e=f.jc();f.qc("nzDescription",e.errorMessage)}}function oe(e,t){1&e&&f.Tb(0,"laze-submit-project-form")}let ae=(()=>{class e{constructor(e,t,n,i,s){this.route=e,this.message=t,this.filestackService=n,this.projectService=i,this.submitProjectFormService=s}ngOnInit(){this.currentUser=this.route.snapshot.data.currentUser,this.selectedProject=this.route.snapshot.data.selectedProject,this.allUsers=this.route.snapshot.data.allUsers,this.filestackService.init(E.a.filestackApiKey)}onSubmit(e){this.isSaveLoading=!0;const t=Object.assign(Object.assign({},e),{id:this.selectedProject.id});let n=this.projectService.update(t);t.file&&(n=this.filestackService.upload(t.file).pipe(Object(I.a)(e=>(t.fileUrl=e.url,t.file=null,console.log({updateData:t}),this.projectService.update(t))))),n.pipe(Object(L.a)(e=>{var n,i,s,r,o,a,l;this.selectedProject=Object.assign(Object.assign({},this.selectedProject),{title:null!==(n=t.title)&&void 0!==n?n:this.selectedProject.title,details:null!==(i=t.details)&&void 0!==i?i:this.selectedProject.details,deadline:null!==(s=t.deadline)&&void 0!==s?s:this.selectedProject.deadline,price:null!==(r=t.price)&&void 0!==r?r:this.selectedProject.price,status:null!==(o=t.status)&&void 0!==o?o:this.selectedProject.status,assigneeId:null!==(a=t.assigneeId)&&void 0!==a?a:this.selectedProject.assigneeId,fileUrl:null!==(l=t.fileUrl)&&void 0!==l?l:this.selectedProject.fileUrl}),this.isSaveLoading=!1,this.message.success("Project has been updated!")}),Object(D.a)(e=>(this.isSaveLoading=!1,this.message.error(e.message),e))).subscribe()}onOpenModal(){this.isModalVisible=!0}onSubmitProject(){if(this.errorMessage=null,!this.submitProjectFormService.getFormValidity())return;this.isModalSaveLoading=!0;const e=Object.assign(Object.assign({},this.submitProjectFormService.getFormValue()),{status:"SUBMITTED"});let t=this.projectService.submit(e);this.submitProjectFormService.getFormValue().file&&(t=this.filestackService.upload(this.submitProjectFormService.getFormValue().file).pipe(Object(I.a)(t=>(e.fileUrl=t.url,this.projectService.submit(e))))),t.pipe(Object(L.a)(e=>{console.log({project:e}),this.isModalSaveLoading=!1}),Object(U.a)(500),Object(L.a)(e=>this.onCancel()),Object(D.a)(e=>(this.errorMessage=e.message,this.isModalSaveLoading=!1,e))).subscribe()}onCancel(){this.isModalVisible=!1}}return e.\u0275fac=function(t){return new(t||e)(f.Sb(s.a),f.Sb(h.b),f.Sb(T.b),f.Sb(k.a),f.Sb(q))},e.\u0275cmp=f.Mb({type:e,selectors:[["ng-component"]],decls:5,vars:8,consts:[["nzTitle","Project","nzSubtitle","Details of project",1,"site-page-header"],[3,"currentUser","selectedProject","allUsers","isSaveLoading","submitForm","openSubmitModal"],["nzTitle","Submit project",3,"nzVisible","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],["class","auth-form-margin","nzType","error","nzCloseable","","nzMessage","Project submission error",3,"nzDescription",4,"ngIf"],[4,"ngIf"],["nzType","error","nzCloseable","","nzMessage","Project submission error",1,"auth-form-margin",3,"nzDescription"]],template:function(e,t){1&e&&(f.Tb(0,"nz-page-header",0),f.Yb(1,"laze-details-card",1),f.gc("submitForm",(function(e){return t.onSubmit(e)}))("openSubmitModal",(function(){return t.onOpenModal()})),f.Xb(),f.Yb(2,"nz-modal",2),f.gc("nzVisibleChange",(function(e){return t.isModalVisible=e}))("nzOnCancel",(function(){return t.onCancel()}))("nzOnOk",(function(){return t.onSubmitProject()})),f.Fc(3,re,1,1,"nz-alert",3),f.Fc(4,oe,1,0,"laze-submit-project-form",4),f.Xb()),2&e&&(f.Cb(1),f.qc("currentUser",t.currentUser)("selectedProject",t.selectedProject)("allUsers",t.allUsers)("isSaveLoading",t.isSaveLoading),f.Cb(1),f.qc("nzVisible",t.isModalVisible)("nzOkLoading",t.isModalSaveLoading),f.Cb(1),f.qc("ngIf",t.errorMessage),f.Cb(1),f.qc("ngIf",t.isModalVisible))},directives:[o.a,te,O.a,i.m,V.a,se],styles:["nz-page-header[_ngcontent-%COMP%]{margin-bottom:24px}"]}),e})(),le=(()=>{class e{}return e.\u0275mod=f.Qb({type:e}),e.\u0275inj=f.Pb({factory:function(t){return new(t||e)},providers:[q],imports:[[i.c,r.h,r.n,s.i.forChild([{path:":id",component:ae,resolve:{currentUser:Y.a,selectedProject:w.a,allUsers:x.a}}]),o.b,a.b,l.e,c.b,u.b,b.d,d.c,p.b,h.a,z.b,F,j.c,v.b,X,T.a,O.b,V.b]]}),e})()}}]);